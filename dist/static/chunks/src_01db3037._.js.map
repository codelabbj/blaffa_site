{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rarsh/Documents/blaffa%20project/blaffa_site/src/lib/axios.ts"],"sourcesContent":["import axios, { AxiosError, InternalAxiosRequestConfig } from 'axios';\r\n\r\nconst API_URL = 'https://api.blaffa.net';\r\n\r\n// Create axios instance with base URL\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: Array<{\r\n  resolve: (token: string) => void;\r\n  reject: (error: unknown) => void;\r\n}> = [];\r\n\r\nconst processQueue = (error: unknown, token: string | null = null) => {\r\n  failedQueue.forEach(prom => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token!);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('accessToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle token refresh\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error: AxiosError) => {\r\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n\r\n    // If the error is 401 and we haven't tried to refresh yet\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      if (isRefreshing) {\r\n        // If we're already refreshing, add the request to the queue\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject });\r\n        })\r\n          .then((token) => {\r\n            originalRequest.headers.Authorization = `Bearer ${token}`;\r\n            return api(originalRequest);\r\n          })\r\n          .catch((err) => {\r\n            return Promise.reject(err);\r\n          });\r\n      }\r\n\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        if (!refreshToken) {\r\n          // No refresh token available, redirect to login\r\n          localStorage.removeItem('accessToken');\r\n          window.location.href = '/auth';\r\n          return Promise.reject(error);\r\n        }\r\n\r\n        // Try to refresh the token\r\n        const response = await axios.post(\r\n          `${API_URL}/auth/refresh`,\r\n          { refresh: refreshToken },\r\n          { headers: { 'Content-Type': 'application/json' } }\r\n        );\r\n\r\n        const { access, refresh: newRefresh } = response.data;\r\n        \r\n        // Update tokens in localStorage\r\n        localStorage.setItem('accessToken', access);\r\n        if (newRefresh) {\r\n          localStorage.setItem('refreshToken', newRefresh);\r\n        }\r\n\r\n        // Update the Authorization header\r\n        api.defaults.headers.common.Authorization = `Bearer ${access}`;\r\n        originalRequest.headers.Authorization = `Bearer ${access}`;\r\n\r\n        // Process the queue\r\n        processQueue(null, access);\r\n\r\n        // Retry the original request\r\n        return api(originalRequest);\r\n      } catch (refreshError) {\r\n        // If refresh fails, clear tokens and redirect to login\r\n        console.error('Failed to refresh token:', refreshError);\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('refreshToken');\r\n        window.location.href = '/auth';\r\n        processQueue(refreshError);\r\n        return Promise.reject(refreshError);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    // For other errors, just reject\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,UAAU;AAEhB,sCAAsC;AACtC,MAAM,MAAM,wIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,eAAe;AACnB,IAAI,cAGC,EAAE;AAEP,MAAM,eAAe,CAAC,OAAgB,QAAuB,IAAI;IAC/D,YAAY,OAAO,CAAC,CAAA;QAClB,IAAI,OAAO;YACT,KAAK,MAAM,CAAC;QACd,OAAO;YACL,KAAK,OAAO,CAAC;QACf;IACF;IACA,cAAc,EAAE;AAClB;AAEA,wCAAwC;AACxC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,+CAA+C;AAC/C,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,0DAA0D;IAC1D,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,IAAI,cAAc;YAChB,4DAA4D;YAC5D,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,YAAY,IAAI,CAAC;oBAAE;oBAAS;gBAAO;YACrC,GACG,IAAI,CAAC,CAAC;gBACL,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;gBACzD,OAAO,IAAI;YACb,GACC,KAAK,CAAC,CAAC;gBACN,OAAO,QAAQ,MAAM,CAAC;YACxB;QACJ;QAEA,gBAAgB,MAAM,GAAG;QACzB,eAAe;QAEf,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,CAAC,cAAc;gBACjB,gDAAgD;gBAChD,aAAa,UAAU,CAAC;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB,OAAO,QAAQ,MAAM,CAAC;YACxB;YAEA,2BAA2B;YAC3B,MAAM,WAAW,MAAM,wIAAA,CAAA,UAAK,CAAC,IAAI,CAC/B,GAAG,QAAQ,aAAa,CAAC,EACzB;gBAAE,SAAS;YAAa,GACxB;gBAAE,SAAS;oBAAE,gBAAgB;gBAAmB;YAAE;YAGpD,MAAM,EAAE,MAAM,EAAE,SAAS,UAAU,EAAE,GAAG,SAAS,IAAI;YAErD,gCAAgC;YAChC,aAAa,OAAO,CAAC,eAAe;YACpC,IAAI,YAAY;gBACd,aAAa,OAAO,CAAC,gBAAgB;YACvC;YAEA,kCAAkC;YAClC,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC9D,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAE1D,oBAAoB;YACpB,aAAa,MAAM;YAEnB,6BAA6B;YAC7B,OAAO,IAAI;QACb,EAAE,OAAO,cAAc;YACrB,uDAAuD;YACvD,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,aAAa;YACb,OAAO,QAAQ,MAAM,CAAC;QACxB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,gCAAgC;IAChC,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rarsh/Documents/blaffa%20project/blaffa_site/src/components/ThemeToggle.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React from 'react';\r\nimport { useTheme } from './ThemeProvider';\r\n\r\nconst ThemeToggle: React.FC = () => {\r\n  const { theme, toggleTheme } = useTheme();\r\n  \r\n  return (\r\n    <button\r\n      onClick={toggleTheme}\r\n      className=\"flex items-center justify-center p-2 rounded-full\"\r\n      style={{ \r\n        backgroundColor: theme.mode === 'dark' ? '#374151' : '#e5e7eb',\r\n      }}\r\n      aria-label={`Switch to ${theme.mode === 'light' ? 'dark' : 'light'} mode`}\r\n    >\r\n      {theme.mode === 'light' ? (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\" />\r\n        </svg>\r\n      ) : (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n        </svg>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ThemeToggle;"],"names":[],"mappings":";;;;AAGA;;;AAHA;;AAKA,MAAM,cAAwB;;IAC5B,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,CAAA,GAAA,sIAAA,CAAA,WAAQ,AAAD;IAEtC,qBACE,6LAAC;QACC,SAAS;QACT,WAAU;QACV,OAAO;YACL,iBAAiB,MAAM,IAAI,KAAK,SAAS,YAAY;QACvD;QACA,cAAY,CAAC,UAAU,EAAE,MAAM,IAAI,KAAK,UAAU,SAAS,QAAQ,KAAK,CAAC;kBAExE,MAAM,IAAI,KAAK,wBACd,6LAAC;YAAI,OAAM;YAA6B,WAAU;YAAU,MAAK;YAAO,SAAQ;YAAY,QAAO;sBACjG,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBAAQ,aAAa;gBAAG,GAAE;;;;;;;;;;iCAGvE,6LAAC;YAAI,OAAM;YAA6B,WAAU;YAAU,MAAK;YAAO,SAAQ;YAAY,QAAO;sBACjG,cAAA,6LAAC;gBAAK,eAAc;gBAAQ,gBAAe;gBAAQ,aAAa;gBAAG,GAAE;;;;;;;;;;;;;;;;AAK/E;GAvBM;;QAC2B,sIAAA,CAAA,WAAQ;;;KADnC;uCAyBS","debugId":null}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rarsh/Documents/blaffa%20project/blaffa_site/src/components/DashboardHeader.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport { useState, useEffect } from 'react'; // Removed MouseEvent import from react\r\nimport { User, Bell, Download} from 'lucide-react';\r\nimport Image from 'next/image';\r\nimport ThemeToggle from './ThemeToggle';\r\n//import LanguageToggle from './LanguageToggle';\r\nimport { useTranslation } from 'react-i18next';\r\n//import api from '@/lib/axios';\r\n\r\n\r\nconst DashboardHeader = () => {\r\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\r\n  const { t } = useTranslation();\r\n  \r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      setTimeout(() => {\r\n      }, 5000);\r\n    }, 3000);\r\n  }, []);\r\n\r\n  // Close mobile menu when clicking outside\r\n  useEffect(() => {\r\n    // Use the native DOM MouseEvent type\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      // Safely check if event.target is an Element before using closest\r\n      if (showMobileMenu && event.target instanceof Element && !event.target.closest('.mobile-menu-container')) {\r\n        setShowMobileMenu(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('click', handleClickOutside);\r\n    return () => document.removeEventListener('click', handleClickOutside);\r\n  }, [showMobileMenu]);\r\n\r\n  // Explicitly type the action parameter\r\n  const handleMenuItemClick = (action: () => void) => {\r\n    setShowMobileMenu(false);\r\n    if (typeof action === 'function') {\r\n      action();\r\n    }\r\n  };\r\n\r\n  // return (\r\n  //   <>\r\n  //     <header className=\" backdrop-blur-lg border-b border-black/20 sticky top-0 z-50\">\r\n  //       <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n  //         <div className=\"flex items-center justify-between h-16\">\r\n  //           <div className=\"flex items-center space-x-4\">\r\n  //             <div className=\"flex items-center space-x-2\">\r\n  //               <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center\">\r\n  //                 <Image src=\"/logo.png\" alt=\"Logo\" width={50} height={50} className=\"rounded-full\" />\r\n  //               </div>\r\n  //               <span className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-blue-600 bg-clip-text text-transparent\">\r\n  //                 Blaffa\r\n  //               </span>\r\n  //             </div>\r\n  //           </div>\r\n            \r\n  //           <div className=\"flex items-center space-x-4\">\r\n  //               <button\r\n  //                 onClick={() => handleMenuItemClick(() => {\r\n  //                   window.location.href = 'https://api.blaffa.net/download_apk';\r\n  //                 })}\r\n  //                 className=\"w-full px-4 py-3 flex items-center gap-3 hover:bg-gray-800 transition-colors text-left group\"\r\n  //               >\r\n  //                 <div className=\"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center group-hover:bg-blue-500/30 transition-colors\">\r\n  //                   <Download size={16} className=\"text-blue-500\" />\r\n  //                 </div>\r\n  //                 <span className=\"text-gray-400 group-hover:text-white transition-colors\">\r\n  //                   {t(\"Télécharger l'application\")}\r\n  //                 </span>\r\n  //               </button>\r\n  //             <a href='/notifications' className=\"relative p-2  hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\">\r\n  //                 <Bell className=\"h-6 w-6\" />\r\n  //                 {/* {notifications.some((n) => !n.is_read) && (\r\n  //                   <span className=\"absolute -top-1 -right-1 text-white text-xs px-1.5 rounded-full\">\r\n  //                     {notifications.filter((n) => !n.is_read).length}\r\n  //                   </span>\r\n  //                 )} */}\r\n  //             </a>\r\n  //             <a className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center relative group\" href='/profile'>\r\n  //               <User size={16} className=\"text-sm text-white font-bold group-hover:scale-110 transition-transform\"/>\r\n  //               <div className=\"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-75 duration-1000 hidden group-hover:block\"></div>\r\n  //             </a>\r\n  //             <div className=\"w-8 h-8 \"><ThemeToggle /></div>\r\n  //           </div>\r\n  //         </div>\r\n  //       </div>\r\n  //     </header>\r\n\r\n  //   </>\r\n\r\n  // );\r\n\r\n  return (\r\n  <>\r\n    <header className=\"backdrop-blur-lg border-b border-black/20 sticky top-0 z-50 overflow-x-hidden\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full\">\r\n        <div className=\"flex items-center justify-between h-16 w-full overflow-x-hidden\">\r\n          <div className=\"flex items-center space-x-4 flex-shrink-0\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              {/* <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg flex items-center justify-center\">\r\n                \r\n              </div> */}\r\n              <Image src=\"/logo.png\" alt=\"Logo\" width={40} height={40} className=\"rounded-full\" />\r\n              <span className=\"text-xl font-bold bg-gradient-to-r from-blue-600 to-blue-600 bg-clip-text text-transparent\">\r\n                Blaffa\r\n              </span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-2 sm:space-x-4 flex-shrink-0\">\r\n            {/* Desktop Download Button */}\r\n            <button\r\n              onClick={() => handleMenuItemClick(() => {\r\n                window.location.href = 'https://api.blaffa.net/download_apk';\r\n              })}\r\n              className=\"hidden lg:flex px-3 py-2 items-center gap-2 hover:bg-gray-800 transition-colors text-left group rounded-lg max-w-fit\"\r\n            >\r\n              <div className=\"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center group-hover:bg-blue-500/30 transition-colors\">\r\n                <Download size={16} className=\"text-blue-500\" />\r\n              </div>\r\n              <span className=\"text-gray-400 group-hover:text-white transition-colors text-sm whitespace-nowrap\">\r\n                {t(\"Télécharger l'application\")}\r\n              </span>\r\n            </button>\r\n\r\n            {/* Mobile Download Button - Icon Only */}\r\n            <button\r\n              onClick={() => handleMenuItemClick(() => {\r\n                window.location.href = 'https://api.blaffa.net/download_apk';\r\n              })}\r\n              className=\"lg:hidden p-2 hover:bg-gray-800 transition-colors rounded-lg\"\r\n              title={t(\"Télécharger l'application\")}\r\n            >\r\n              <Download size={18} className=\"text-blue-500\" />\r\n            </button>\r\n\r\n            <a href='/notifications' className=\"relative p-2 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors\">\r\n              <Bell className=\"h-5 w-5 sm:h-6 sm:w-6\" />\r\n              {/* {notifications.some((n) => !n.is_read) && (\r\n                <span className=\"absolute -top-1 -right-1 text-white text-xs px-1.5 rounded-full\">\r\n                  {notifications.filter((n) => !n.is_read).length}\r\n                </span>\r\n              )} */}\r\n            </a>\r\n            \r\n            <a className=\"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center relative group\" href='/profile'>\r\n              <User size={16} className=\"text-sm text-white font-bold group-hover:scale-110 transition-transform\"/>\r\n              <div className=\"absolute inset-0 bg-blue-500 rounded-full animate-ping opacity-75 duration-1000 hidden group-hover:block\"></div>\r\n            </a>\r\n            \r\n            <div className=\"w-8 h-8\">\r\n              <ThemeToggle />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  </>\r\n);\r\n\r\n};\r\n\r\nexport default DashboardHeader;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 507, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/rarsh/Documents/blaffa%20project/blaffa_site/src/app/coupon/page.tsx"],"sourcesContent":["\"use client\"\r\nimport { useState, useEffect } from 'react';\r\nimport Head from 'next/head';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useTheme } from '../../components/ThemeProvider'; \r\nimport api from '@/lib/axios';\r\nimport DashboardHeader from '@/components/DashboardHeader';\r\n\r\n// Define the type for a single coupon object\r\ninterface BetApp {\r\n  id: string;\r\n  name: string;\r\n  image: string;\r\n  is_active: boolean;\r\n  order: number;\r\n  city: string;\r\n  street: string;\r\n  deposit_tuto_content: string;\r\n  deposit_link: string | null;\r\n  withdrawal_tuto_content: string;\r\n  withdrawal_link: string | null;\r\n  public_name: string;\r\n  minimun_deposit: number;\r\n  max_deposit: number;\r\n  minimun_with: number;\r\n  max_win: number;\r\n}\r\n\r\ninterface Coupon {\r\n  id: string;\r\n  images: string[];\r\n  created_at: string;\r\n  code: string;\r\n  bet_app: BetApp;\r\n}\r\n\r\nconst CouponPage = () => {\r\n  const [coupons, setCoupons] = useState<Coupon[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [copied, setCopied] = useState(false);\r\n  const { t } = useTranslation();\r\n  const { theme } = useTheme();\r\n\r\n  useEffect(() => {\r\n    const accessToken = localStorage.getItem('accessToken');\r\n    if (!accessToken) {\r\n        console.error(t('No access token found.'));\r\n        window.location.href = '/';\r\n        return;\r\n    }\r\n    fetchCoupons(accessToken);\r\n  }, []);\r\n\r\n  const fetchCoupons = async (accessToken: string) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const response = await api.get(`/blaffa/coupon`, {\r\n        headers: {\r\n          'Authorization': `Bearer ${accessToken}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n      });\r\n\r\n      if (response.status !== 200) {\r\n        const errorData = await response.data.catch(() => ({ message: 'Unknown error' }));\r\n        throw new Error(`HTTP error! status: ${response.status}, message: ${errorData.message || response.statusText}`);\r\n      }\r\n\r\n      const data = await response.data;\r\n      if (Array.isArray(data.results)) {\r\n         setCoupons(data.results);\r\n      } else {\r\n         console.error('API response results is not an array:', data);\r\n         setCoupons([]);\r\n      }\r\n\r\n    } catch (err) {\r\n      console.error('Error fetching coupons:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCopy = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2000);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <>\r\n        <Head>\r\n          <title>Coupons - blaffa</title>\r\n          <meta name=\"description\" content=\"View all available coupons\" />\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n        </Head>\r\n        <div className={`min-h-screen bg-gradient-to-br ${theme.colors.a_background} flex items-center justify-center p-4`}>\r\n          <div className=\"text-center\">\r\n            <div className=\"relative mb-6\">\r\n              <div className=\"animate-spin rounded-full h-16 w-16 border-4 border-blue-500/30 border-t-blue-500 mx-auto\"></div>\r\n              <div className=\"absolute inset-0 rounded-full bg-gradient-to-r from-blue-500/20 to-blue-500/20 animate-pulse\"></div>\r\n            </div>\r\n            <p className=\"text-slate-300 text-lg font-medium\">Loading coupons...</p>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <>\r\n        <Head>\r\n          <title>Coupons - blaffa</title>\r\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n        </Head>\r\n        <div className={`min-h-screen bg-gradient-to-br ${theme.colors.a_background} flex items-center justify-center p-4`}>\r\n          <div className=\"text-center max-w-md bg-gradient-to-r from-slate-800/80 to-slate-700/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-slate-600/50 p-8\">\r\n            <div className=\"w-16 h-16 rounded-2xl bg-gradient-to-br from-red-500/20 to-red-600/20 text-red-400 shadow-lg shadow-red-500/20 flex items-center justify-center mx-auto mb-6\">\r\n              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n            </div>\r\n            <h2 className=\"text-2xl font-bold text-white mb-4\">Error Loading Coupons</h2>\r\n            <p className=\"text-slate-400 mb-6 leading-relaxed\">{error}</p>\r\n            <button\r\n              onClick={() => {\r\n                 const accessToken = localStorage.getItem('accessToken');\r\n                 if (accessToken) {\r\n                    fetchCoupons(accessToken);\r\n                 } else {\r\n                    console.error(t('No access token found for retry.'));\r\n                    window.location.href = '/';\r\n                 }\r\n              }}\r\n              className=\"px-8 py-4 bg-gradient-to-r from-blue-600 to-blue-600 hover:from-blue-500 hover:to-blue-500 text-white rounded-xl transition-all duration-300 font-medium shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105\"\r\n            >\r\n              Try Again\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>Coupons - blaffa</title>\r\n        <meta name=\"description\" content=\"View all available coupons from blaffa\" />\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\r\n      </Head>\r\n\r\n      <div className={`min-h-screen bg-gradient-to-br ${theme.colors.a_background} p-4`}>\r\n        <DashboardHeader/>\r\n        \r\n        <div className=\"max-w-4xl mx-auto\">\r\n          {/* Header Section */}\r\n          <div className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-8\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-white mb-2\">{t(\"Available Coupons\")}</h1>\r\n              <p className=\"text-slate-400\">Discover amazing deals and offers</p>\r\n            </div>\r\n            \r\n            <div className=\"flex items-center gap-4 mt-4 md:mt-0\">\r\n              <button\r\n                onClick={() => window.history.back()}\r\n                className=\"flex items-center text-white bg-gradient-to-r from-slate-700/50 to-slate-600/50 hover:from-slate-600/50 hover:to-slate-500/50 px-6 py-3 rounded-xl border border-slate-600/30 hover:border-slate-500/50 transition-all duration-300 backdrop-blur-sm shadow-lg hover:shadow-xl group\"\r\n              >\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                </svg>\r\n                {t(\"Back\")}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n                    {/* Main Content */}\r\n          <div className={`bg-gradient-to-r ${theme.colors.s_background} backdrop-blur-sm rounded-3xl shadow-2xl border border-slate-600/50 overflow-hidden`}>\r\n            <div className=\"p-8\">\r\n              {coupons.length === 0 ? (\r\n                <div className={`rounded-2xl shadow p-6 text-center bg-gradient-to-br ${theme.colors.s_background}`} style={{ borderRadius: '1rem' }}>\r\n                  <div className=\" font-semibold\">Aucun coupon disponible.</div>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-col gap-6\">\r\n                  {coupons.map((coupon, idx) => (\r\n                    <div key={idx} className={`rounded-2xl shadow p-6 bg-gradient-to-br ${theme.colors.s_background}`} style={{ borderRadius: '1rem' }}>\r\n                      <div className=\"flex flex-col gap-4\">\r\n                        {/* App Row */}\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <span className=\"font-bold text-base text-white\">App</span>\r\n                          <span className=\"text-base text-white\">{coupon.bet_app?.public_name || coupon.bet_app?.name || 'Unknown'}</span>\r\n                        </div>\r\n                        {/* Code Row */}\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <span className=\"font-bold text-base text-white\">Code</span>\r\n                          <span className=\"flex items-center gap-2\">\r\n                            <span className=\"text-base tracking-widest text-white\">{coupon.code || coupon.id.slice(0, 8)}</span>\r\n                            <button\r\n                              onClick={() => handleCopy(coupon.code || coupon.id.slice(0, 8))}\r\n                              className=\"p-1 rounded hover:bg-gray-200\"\r\n                              aria-label=\"Copy code\"\r\n                            >\r\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <rect x=\"9\" y=\"9\" width=\"13\" height=\"13\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                <rect x=\"3\" y=\"3\" width=\"13\" height=\"13\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                              </svg>\r\n                            </button>\r\n                            {copied && <span className=\"text-xs text-green-600 ml-1\">Copied!</span>}\r\n                          </span>\r\n                        </div>\r\n                        {/* Date Row */}\r\n                        <div className=\"flex justify-between items-center\">\r\n                          <span className=\"font-bold text-base text-white\">Date</span>\r\n                          <span className=\"text-base text-white\">{coupon.created_at ? coupon.created_at.slice(0, 10) : ''}</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CouponPage;"],"names":[],"mappings":"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","debugId":null}}]
}