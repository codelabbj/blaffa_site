(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12866,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(63816),a=e.i(59919);e.i(85269);var r=e.i(22831),o=e.i(28137),i=e.i(11152),n=e.i(6233);function c(){let e,c,d,{t:m,i18n:x}=(0,r.useTranslation)(),{theme:u}=(0,a.useTheme)(),[b,f]=(0,s.useState)([]),[g,h]=(0,s.useState)(!0),[p,j]=(0,s.useState)(null),[y,w]=(0,s.useState)(!1),[v,N]=(0,s.useState)(null),[k,S]=(0,s.useState)(""),[C,$]=(0,s.useState)(!1),[T,U]=(0,s.useState)(null),[I,A]=(0,s.useState)(null),[B,F]=(0,s.useState)(null),[_,z]=(0,s.useState)(!1),[P,R]=(0,s.useState)(!1),[O,L]=(0,s.useState)(""),[E,D]=(0,s.useState)(null),[V,K]=(0,s.useState)(!0),[q,J]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(q){h(!0),j(null);try{let e=localStorage.getItem("accessToken"),t=await l.default.get(`https://api.blaffa.net/blaffa/crypto?type_trans=${q}`,{headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}});f(Array.isArray(t.data.results)?t.data.results:[])}catch{j(m("Failed to fetch cryptocurrencies"))}finally{h(!1)}}})();let e=localStorage.getItem("userId");if(e)S(e);else{let e=localStorage.getItem("accessToken");e&&l.default.get("/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{let t=e.data;t&&t.id&&(localStorage.setItem("userId",t.id.toString()),S(t.id.toString()))}).catch(()=>{})}x.changeLanguage("fr"),console.log("Current language:",x.language,"Back:",m("Back"))},[x.language,q]),(0,s.useEffect)(()=>{if(!k)return;let e=!0;return(async()=>{z(!0);try{let t=localStorage.getItem("accessToken"),s=await fetch("https://api.blaffa.net/auth/check-user-account-status",{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({user_id:k})}),l=await s.json(),a=l.is_verified??l.is_verify??!1;e&&N(!!a)}catch{e&&N(!1)}finally{e&&z(!1)}})(),()=>{e=!1}},[k]);let G=async e=>{if(e.preventDefault(),$(!0),U(null),!I||!B){U(m("Please select both images.")),$(!1);return}try{let e=new FormData;for(let t of(e.append("file",I),e.append("image",B),console.log("FormData contents:"),e.entries()))console.log(t[0]+":",t[1]);let t=localStorage.getItem("accessToken"),s=await fetch("https://api.blaffa.net/blaffa/upload/file",{method:"POST",headers:{...t?{Authorization:`Bearer ${t}`}:{}},body:e});if(console.log("Response status:",s.status),console.log("Response headers:",Object.fromEntries(s.headers.entries())),!s.ok){let e=await s.text();throw console.error("Error response body:",e),Error(`Upload failed: ${s.status} ${s.statusText}`)}let l=await s.json();console.log("Upload response:",l),w(!1),L(m("Images uploaded. Please wait for admin verification.")),R(!0),N(!1)}catch(e){console.error("Upload error:",e),U(m("Failed to upload images. Try again."))}finally{$(!1)}};return(0,t.jsxs)("div",{className:`min-h-screen bg-gradient-to-br ${u.colors.a_background} p-2 sm:p-4 flex flex-col items-center`,children:[V&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${u.colors.a_background} rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-xs sm:max-w-md relative flex flex-col items-center`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center",children:m("Choose Transaction Type")}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,t.jsx)("button",{className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg text-lg font-semibold hover:bg-green-700 transition-all",onClick:()=>{J("buy"),K(!1)},children:m("Buy Crypto")}),(0,t.jsx)("button",{className:"w-full px-6 py-3 bg-yellow-500 text-white rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all",onClick:()=>{J("sale"),K(!1)},children:m("Sell Crypto")})]})]})}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:`fixed top-3 left-3 z-50 w-10 h-10 flex items-center justify-center rounded-full shadow-md
           bg-transparent text-blue-600 dark:text-blue-200  transition-all`,"aria-label":m("Back to Crypto"),style:{backdropFilter:"blur(4px)"},children:(0,t.jsx)(i.FaArrowLeft,{className:"text-xl"})}),(0,t.jsxs)("div",{className:"w-full px-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-6 sm:mb-8",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-center sm:text-left w-full sm:w-auto",children:m("Cryptocurrencies")}),(0,t.jsx)("div",{className:"flex justify-center sm:justify-end w-full sm:w-auto relative",children:(e="rounded-full flex items-center justify-center shadow-md transition-all",c="w-9 h-9 text-xl",d="fixed top-3 right-3 z-50 sm:static sm:top-auto sm:right-auto",_?(0,t.jsx)("span",{className:`${e} ${c} ${d} bg-gray-300 animate-spin text-blue-500`,title:m("Checking..."),children:(0,t.jsx)(n.ImSpinner2,{})}):!0===v?(0,t.jsx)("span",{className:`${e} ${c} ${d} bg-green-500 text-white`,title:m("Verified"),children:(0,t.jsx)(i.FaCheckCircle,{})}):(0,t.jsx)("span",{className:`${e} ${c} ${d} bg-yellow-400 text-white`,title:m("Not Verified"),children:(0,t.jsx)(i.FaExclamationTriangle,{})}))})]}),p&&(0,t.jsx)("div",{className:"mb-4 p-3 sm:p-4 bg-red-100 border border-red-400 text-red-700 rounded text-sm sm:text-base",children:p}),q&&!V&&(E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:`mb-4 flex items-center gap-2 rounded-lg shadow-sm font-semibold transition-all
                px-2 py-1 sm:px-4 sm:py-2
                text-base sm:text-lg
                ${"dark"===u.mode?"bg-slate-800 text-blue-300 hover:bg-slate-700":"bg-blue-50 text-blue-700 hover:bg-blue-100"}
                `,style:{border:`1px solid ${u.colors.accent}`},onClick:()=>D(null),children:[(0,t.jsx)(i.FaArrowLeft,{className:"text-lg sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:m("Back to Cryptos")})]}),("buy"===q||"sale"===q)&&(0,t.jsx)(o.default,{isVerified:!0===v,crypto:E,typeTrans:q})]}):g?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[200px] sm:min-h-[300px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-blue-500/30 border-t-blue-500"})}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6",children:b.map(e=>(0,t.jsxs)("div",{className:`group relative overflow-hidden bg-gradient-to-br ${u.colors.s_background} border border-slate-600/30 rounded-2xl p-4 sm:p-6 flex flex-col items-center shadow-md hover:scale-[1.03] active:scale-95 transition-all duration-200 cursor-pointer`,onClick:()=>{!k?j(m("User ID not found. Please log in.")):v?D(e):w(!0)},children:[(0,t.jsx)("img",{src:e.logo,alt:e.name,className:"w-10 h-10 sm:w-12 sm:h-12 object-contain mb-3 sm:mb-4 rounded-full border border-slate-300 dark:border-slate-600 bg-white dark:bg-gray-800"}),(0,t.jsx)("div",{className:"font-bold text-base sm:text-lg mb-1 sm:mb-2 text-center",children:e.name}),(0,t.jsx)("div",{className:"text-slate-400 text-xs sm:text-sm mb-1",children:e.symbol}),(0,t.jsxs)("div",{className:"text-blue-500 font-mono text-2xl sm:text-3xl font-extrabold",children:[e.public_amount,"xof"]})]},e.id))})),y&&!v&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${u.colors.a_background} rounded-2xl shadow-2xl p-4 sm:p-8 w-full max-w-xs sm:max-w-md relative`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-center",children:m("Account Verification Required")}),(0,t.jsxs)("form",{onSubmit:G,children:[(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("label",{className:"block mb-1 sm:mb-2 text-sm sm:text-base font-semibold",children:m("Upload your image (face)")}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>A(e.target.files?.[0]||null),className:"w-full text-xs sm:text-sm border rounded p-2"}),I&&(0,t.jsx)("div",{className:"mt-2 flex justify-center",children:(0,t.jsx)("img",{src:URL.createObjectURL(I),alt:"Preview",className:"h-20 w-20 object-cover rounded shadow"})})]}),(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("label",{className:"block mb-1 sm:mb-2 text-sm sm:text-base font-semibold",children:m("Upload your card image (ID card)")}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>F(e.target.files?.[0]||null),className:"w-full text-xs sm:text-sm border rounded p-2"}),B&&(0,t.jsx)("div",{className:"mt-2 flex justify-center",children:(0,t.jsx)("img",{src:URL.createObjectURL(B),alt:"Preview",className:"h-20 w-20 object-cover rounded shadow"})})]}),T&&(0,t.jsx)("div",{className:"mb-2 text-red-600 text-xs sm:text-sm text-center",children:T}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 mt-4",children:[(0,t.jsx)("button",{type:"button",className:"w-full sm:flex-1 px-4 py-2 bg-gray-400 dark:bg-slate-700 rounded hover:bg-gray-300 dark:hover:bg-slate-600 text-sm sm:text-base",onClick:()=>w(!1),disabled:C,children:m("Cancel")}),(0,t.jsx)("button",{type:"submit",className:"w-full sm:flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm sm:text-base",disabled:C,children:C?m("Uploading..."):m("Upload & Submit")})]})]})]})}),P&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${u.colors.a_background} rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-xs sm:max-w-md relative`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-600",children:m("Success")}),(0,t.jsx)("div",{className:"mb-6 text-center text-base sm:text-lg",children:O}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-base",onClick:()=>R(!1),children:m("Close")})})]})})]})]})}e.s(["default",()=>c])}]);