(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28137,11152,6233,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(59919),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=r.default.createContext&&r.default.createContext(l),n=["attr","size","title"];function o(){return(o=Object.assign.bind()).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a,l,s;a=e,l=t,s=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(l))in a?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>r.default.createElement(u,o({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,a)=>r.default.createElement(t.tag,i({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:l,size:s,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,l=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,n),u=s||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.default.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:a,style:i(i({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&r.default.createElement("title",null,c),e.children)};return void 0!==s?r.default.createElement(s.Consumer,null,e=>t(e)):t(l)}function m(e){return d({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function b(e){return d({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function x(e){return d({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function p(e){return d({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}e.s(["FaArrowLeft",()=>m,"FaCheckCircle",()=>b,"FaCopy",()=>x,"FaExclamationTriangle",()=>p],11152);var f=e.i(63816);e.i(85269);var g=e.i(22831),h=e.i(69218);let v="/blaffa/transaction/";function y({isVerified:e,crypto:l,typeTrans:s,selectedNetwork:n}){let{t:o}=(0,g.useTranslation)(),{theme:c}=(0,a.useTheme)(),{addMessageHandler:i}=(0,h.useWebSocket)(),[d,u]=(0,r.useState)(""),[b,p]=(0,r.useState)(""),[y,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[k,_]=(0,r.useState)(""),[O,$]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),[z,P]=(0,r.useState)(null),[E,T]=(0,r.useState)(""),[A,F]=(0,r.useState)(null),[V,L]=(0,r.useState)(""),[M,H]=(0,r.useState)("form"),B=e=>{let t=e.response?.data;if(!t)return o("Une erreur est survenue. Veuillez rÃ©essayer.");let r=t.code;if(r)switch(r){case"token_not_valid":return o("Votre session est expirÃ©e ou invalide. Veuillez vous reconnecter.");case"user_not_found":return o("Utilisateur non trouvÃ©.")}if("string"==typeof t.detail)return t.detail;if("string"==typeof t.message)return t.message;if("object"==typeof t){let e=Object.values(t)[0];if(Array.isArray(e)&&e.length>0)return e[0];if("string"==typeof e)return e}return o("Une erreur est survenue. Veuillez rÃ©essayer.")};(0,r.useEffect)(()=>{let e=i(e=>{"transaction_link"===e.type&&e.data&&F(e.data)});return()=>e()},[i]);let D=async()=>{if(T(""),P(null),!n)return void T(o("Please select a network."));if("buy"===s){if(!N||!k||N!==k)return void T(o("Les adresses de portefeuille ne correspondent pas."));if(!y)return void T(o("Veuillez entrer votre numÃ©ro de tÃ©lÃ©phone."))}if("sale"===s)return void H("sale_confirm");S(!0);try{let e={type_trans:"buy",total_crypto:b,crypto_id:String(l.id),phone_number:y.replace(/\s+/g,""),network_id:n.id,amount:d,wallet_link:N},t=(await f.default.post(v,e)).data;P(t),t&&t.transaction_link&&window.open(t.transaction_link,"_blank","noopener,noreferrer")}catch(e){console.error("Transaction Error:",e),T(B(e))}finally{S(!1),$(null)}},U=async()=>{if(S(!0),T(""),P(null),!n){T(o("Please select a network.")),S(!1);return}try{let e={type_trans:"sale",total_crypto:b,crypto_id:String(l.id),phone_number:y.replace(/\s+/g,""),network_id:n.id,amount:d,hash:V},t=(await f.default.post(v,e)).data;P(t),t&&t.transaction_link&&window.open(t.transaction_link,"_blank","noopener,noreferrer"),setTimeout(()=>{H("form"),P(null),L(""),$(null)},2e3)}catch(e){console.error("Hash Submit Error:",e),T(B(e))}finally{S(!1)}};return e?"sale_confirm"===M?(0,t.jsxs)("div",{className:"w-full min-h-[400px] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,t.jsx)("button",{onClick:()=>H("form"),className:`${c.colors.hover} text-xl`,children:(0,t.jsx)(m,{})}),(0,t.jsx)("h1",{className:`text-xl font-bold ${c.colors.text}`,children:"Confirmation de l'envoi"})]}),(0,t.jsx)("p",{className:`text-sm mb-8 ${c.colors.d_text}`,children:"Veuillez envoyer vos cryptos Ã  l'adresse ci-dessous dans votre portefeuille."}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("p",{className:`text-sm font-bold mb-2 ${"dark"===c.mode?"text-blue-400":"text-blue-900"}`,children:"Adresse de destination :"}),(0,t.jsxs)("div",{className:`flex items-center gap-3 p-4 rounded-xl border ${"dark"===c.mode?"bg-slate-800/50 border-slate-700":"bg-gray-50 border-gray-200"}`,children:[(0,t.jsx)("span",{className:`flex-1 font-mono text-sm break-all ${c.colors.text}`,children:l.sale_adress||"Adresse non disponible"}),(0,t.jsx)("button",{onClick:()=>{var e;return e=l.sale_adress||"",void navigator.clipboard.writeText(e)},className:`p-2 rounded-lg ${"dark"===c.mode?"bg-slate-700 text-blue-400":"bg-blue-100 text-blue-800"}`,children:(0,t.jsx)(x,{})})]})]}),(0,t.jsxs)("div",{className:"relative mt-8 mb-auto",children:[(0,t.jsx)("div",{className:"absolute -top-3 left-4 px-2 bg-white dark:bg-slate-900 z-10",children:(0,t.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"Entrez le hash/id de la transaction"})}),(0,t.jsx)("div",{className:`p-4 rounded-xl border-2 border-green-500 ${c.colors.a_background}`,children:(0,t.jsx)("input",{type:"text",value:V,onChange:e=>L(e.target.value),placeholder:"0x...",className:`w-full bg-transparent outline-none text-lg ${c.colors.text} placeholder:text-gray-400`})})]}),(0,t.jsxs)("div",{className:"mt-10",children:[E&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm font-medium",children:E}),(0,t.jsx)("button",{onClick:U,className:"w-full py-4 rounded-xl font-bold text-lg text-white shadow-lg bg-[#003087] hover:bg-[#002566] transition-all disabled:opacity-50",disabled:C||!V,children:C?o("Traitement..."):"Valider"})]})]}):(0,t.jsxs)("div",{className:"w-full",children:["buy"===s&&(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:`p-4 rounded-xl border ${c.colors.a_background} ${"dark"===c.mode?"border-blue-900":"border-blue-800"}`,children:[(0,t.jsx)("label",{className:`block mb-2 text-sm ${c.colors.text}`,children:"Adresse du portefeuille"}),(0,t.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),placeholder:"Entrez l'adresse du portefeuille",className:`w-full bg-transparent outline-none text-lg ${c.colors.text} placeholder:text-gray-400`})]}),(0,t.jsx)("div",{className:`p-4 rounded-xl border ${c.colors.a_background} ${"dark"===c.mode?"border-gray-700":"border-gray-300"}`,children:(0,t.jsx)("input",{type:"text",value:k,onChange:e=>_(e.target.value),placeholder:"Confirmer l'adresse du portefeuille",className:`w-full bg-transparent outline-none text-lg ${c.colors.text} placeholder:text-gray-400`})}),(0,t.jsxs)("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-xl flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border border-orange-400 text-orange-400 flex items-center justify-center text-xs flex-shrink-0 mt-0.5",children:"i"}),(0,t.jsx)("p",{className:"text-sm text-orange-800 leading-snug",children:"VÃ©rifiez bien votre adresse. Les transactions crypto sont irrÃ©versibles."})]})]}),(0,t.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{className:`p-4 rounded-xl border ${c.colors.a_background} ${"dark"===c.mode?"border-gray-700":"border-gray-300"}`,children:[(0,t.jsxs)("label",{className:"block mb-1 text-sm text-gray-500",children:["QuantitÃ© de ",l.name," Ã  ","buy"===s?"acheter":"vendre"]}),(0,t.jsx)("input",{type:"number",value:b,onChange:e=>{var t;(p(t=e.target.value),!t||isNaN(Number(t)))?u(""):u((Number(t)*Number(l.public_amount)).toFixed(0))},placeholder:"0",className:`w-full bg-transparent outline-none text-xl font-medium ${c.colors.text}`})]}),(0,t.jsxs)("div",{className:`p-4 rounded-xl border ${c.colors.a_background} ${"dark"===c.mode?"border-gray-700":"border-gray-300"}`,children:[(0,t.jsx)("label",{className:"block mb-1 text-sm text-gray-500",children:"Montant Ã©quivalent (F CFA)"}),(0,t.jsx)("input",{type:"number",value:d,onChange:e=>{var t;(u(t=e.target.value),!t||isNaN(Number(t)))?p(""):p((Number(t)/Number(l.public_amount)).toFixed(6))},placeholder:"0",className:`w-full bg-transparent outline-none text-xl font-medium ${c.colors.text}`})]}),(0,t.jsx)("p",{className:"text-xs text-gray-400 pl-1",children:"1000 F - 60000 F"})]}),"buy"===s&&(0,t.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border border-blue-500 text-blue-500 flex items-center justify-center text-xs flex-shrink-0 mt-0.5",children:"i"}),(0,t.jsx)("p",{className:"text-sm text-blue-800 leading-snug",children:"AprÃ¨s avoir lancer, veuillez composer *133# puis 1 pour confirmer le montant qui apparaÃ®t."})]}),(0,t.jsxs)("div",{className:"flex gap-4 mb-8",children:[(0,t.jsxs)("div",{className:`w-1/3 flex items-center justify-center gap-2 h-14 rounded-xl border ${"dark"===c.mode?"border-slate-700":"border-gray-300"} ${c.colors.a_background}`,children:[(0,t.jsx)("span",{className:"text-2xl",children:(n?.image,(e=>{if(!e)return"ðŸ‡§ðŸ‡«";switch(e.replace("+","")){case"226":return"ðŸ‡§ðŸ‡«";case"225":return"ðŸ‡¨ðŸ‡®";case"223":return"ðŸ‡²ðŸ‡±";case"221":return"ðŸ‡¸ðŸ‡³";case"228":return"ðŸ‡¹ðŸ‡¬";case"229":return"ðŸ‡§ðŸ‡¯";case"237":return"ðŸ‡¨ðŸ‡²";case"224":return"ðŸ‡¬ðŸ‡³";case"241":return"ðŸ‡¬ðŸ‡¦";case"242":return"ðŸ‡¨ðŸ‡¬";case"243":return"ðŸ‡¨ðŸ‡©";case"227":return"ðŸ‡³ðŸ‡ª";case"233":return"ðŸ‡¬ðŸ‡­";case"234":return"ðŸ‡³ðŸ‡¬";default:return"ðŸŒ"}})(n?.indication||"+225"))}),(0,t.jsx)("span",{className:`text-lg font-bold ${c.colors.text}`,children:n?.indication?n.indication:"+225"})]}),(0,t.jsx)("div",{className:`flex-1 h-14 px-4 rounded-xl border ${"dark"===c.mode?"border-slate-700":"border-gray-300"} ${c.colors.a_background} flex items-center`,children:(0,t.jsx)("input",{type:"tel",value:y,onChange:e=>{j(e.target.value.replace(/\D/g,""))},placeholder:"NumÃ©ro de tÃ©lÃ©phone",className:`w-full bg-transparent outline-none text-lg ${c.colors.text} placeholder:text-gray-400`})})]}),"buy"===s&&(0,t.jsx)("p",{className:"text-center text-orange-400 text-sm italic mb-6",children:"Les dÃ©pÃ´ts commencent a partir de 105 FCFA"}),E&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm font-medium",children:E}),(0,t.jsx)("button",{onClick:D,className:`w-full py-4 rounded-xl font-bold text-lg text-white shadow-lg transition-all
                ${C?"opacity-70 cursor-not-allowed":"hover:scale-[0.99]"}
            `,style:{backgroundColor:"dark"===c.mode?c.colors.primary:"#002D74"},disabled:C,children:C?o("Traitement..."):"Confirmer"})]}):(0,t.jsx)("div",{className:"p-4 bg-yellow-100 text-yellow-800 rounded-lg text-center",children:o("Please verify your account to buy or sell crypto.")})}function j(e){return d({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8c-0.020-1.045-0.247-2.086-0.665-3.038-0.417-0.953-1.023-1.817-1.766-2.53s-1.624-1.278-2.578-1.651c-0.953-0.374-1.978-0.552-2.991-0.531-1.013 0.020-2.021 0.24-2.943 0.646-0.923 0.405-1.758 0.992-2.449 1.712s-1.237 1.574-1.597 2.497c-0.361 0.923-0.533 1.914-0.512 2.895 0.020 0.981 0.234 1.955 0.627 2.847 0.392 0.892 0.961 1.7 1.658 2.368s1.523 1.195 2.416 1.543c0.892 0.348 1.851 0.514 2.799 0.493 0.949-0.020 1.89-0.227 2.751-0.608 0.862-0.379 1.642-0.929 2.287-1.604s1.154-1.472 1.488-2.335c0.204-0.523 0.342-1.069 0.415-1.622 0.019 0.001 0.039 0.002 0.059 0.002 0.552 0 1-0.448 1-1 0-0.028-0.001-0.056-0.004-0.083h0.004zM14.411 10.655c-0.367 0.831-0.898 1.584-1.55 2.206s-1.422 1.112-2.254 1.434c-0.832 0.323-1.723 0.476-2.608 0.454-0.884-0.020-1.759-0.215-2.56-0.57-0.801-0.354-1.526-0.867-2.125-1.495s-1.071-1.371-1.38-2.173c-0.31-0.801-0.457-1.66-0.435-2.512s0.208-1.694 0.551-2.464c0.342-0.77 0.836-1.468 1.441-2.044s1.321-1.029 2.092-1.326c0.771-0.298 1.596-0.438 2.416-0.416s1.629 0.202 2.368 0.532c0.74 0.329 1.41 0.805 1.963 1.387s0.988 1.27 1.272 2.011c0.285 0.74 0.418 1.532 0.397 2.32h0.004c-0.002 0.027-0.004 0.055-0.004 0.083 0 0.516 0.39 0.94 0.892 0.994-0.097 0.544-0.258 1.075-0.481 1.578z"},child:[]}]})(e)}e.s(["default",()=>y],28137),e.s(["ImSpinner2",()=>j],6233)}]);