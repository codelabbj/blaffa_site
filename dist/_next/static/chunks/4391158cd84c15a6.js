(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,12866,e=>{"use strict";var t=e.i(43476),l=e.i(71645),s=e.i(63816),a=e.i(59919);e.i(85269);var r=e.i(22831),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=l.default.createContext&&l.default.createContext(n),i=["attr","size","title"];function c(){return(c=Object.assign.bind()).apply(this,arguments)}function d(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,s)}return l}function m(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?d(Object(l),!0).forEach(function(t){var s,a,r;s=e,a=t,r=l[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var s=l.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):d(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}function u(e){return t=>l.default.createElement(x,c({attr:m({},e.attr)},t),function e(t){return t&&t.map((t,s)=>l.default.createElement(t.tag,m({key:s},t.attr),e(t.child)))}(e.child))}function x(e){var t=t=>{var s,{attr:a,size:r,title:n}=e,o=function(e,t){if(null==e)return{};var l,s,a=function(e,t){if(null==e)return{};var l={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;l[s]=e[s]}return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)l=r[s],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(a[l]=e[l])}return a}(e,i),d=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),l.default.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,o,{className:s,style:m(m({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),n&&l.default.createElement("title",null,n),e.children)};return void 0!==o?l.default.createElement(o.Consumer,null,e=>t(e)):t(n)}function b(e){return u({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function h(e){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function g(e){return u({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(e)}function f(e){return u({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function p(e){return u({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function j(e){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.39 361.8l-112-48a24 24 0 0 0-28 6.9l-49.6 60.6A370.66 370.66 0 0 1 130.6 204.11l60.6-49.6a23.94 23.94 0 0 0 6.9-28l-48-112A24.16 24.16 0 0 0 122.6.61l-104 24A24 24 0 0 0 0 48c0 256.5 207.9 464 464 464a24 24 0 0 0 23.4-18.6l24-104a24.29 24.29 0 0 0-14.01-27.6z"},child:[]}]})(e)}function v(e){return u({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(e)}var y=e.i(69218);let w="https://api.blaffa.net/blaffa/transaction";function N({isVerified:e,crypto:n,typeTrans:o}){let{t:i}=(0,r.useTranslation)(),{theme:c}=(0,a.useTheme)(),{addMessageHandler:d}=(0,y.useWebSocket)(),[m,u]=(0,l.useState)(""),[x,b]=(0,l.useState)(""),[f,N]=(0,l.useState)(""),[C,S]=(0,l.useState)(""),[O,$]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[z,T]=(0,l.useState)(null),[A,B]=(0,l.useState)(!1),[E,F]=(0,l.useState)(null),[I,U]=(0,l.useState)(""),[M,L]=(0,l.useState)([]),[V,D]=(0,l.useState)(null),[H,R]=(0,l.useState)(null),[W,J]=(0,l.useState)(""),[K,X]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("accessToken");if(e)try{let t=await s.default.get("/blaffa/network/",{headers:{Authorization:`Bearer ${e}`}});Array.isArray(t.data)&&L(t.data)}catch{}})()},[]),(0,l.useEffect)(()=>{!m||isNaN(Number(m))||!o?b(""):"buy"===o?b((Number(m)/Number(n.public_amount)).toFixed(2)):"sale"===o&&b((Number(m)*Number(n.public_amount)).toFixed(2))},[m,n,o]),(0,l.useEffect)(()=>{let e=d(e=>{"transaction_link"===e.type&&e.data&&R(e.data)});return()=>e()},[d]);let Y=async()=>{if(U(""),F(null),!V)return void U(i("Please select a network."));if("sale"===o)return void X(!0);B(!0);try{let e={type_trans:"buy",total_crypto:x,crypto_id:String(n.id),phone_number:f.replace(/\s+/g,""),network_id:V.id,amount:m,wallet_link:O},t=localStorage.getItem("accessToken"),l={"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},s=await fetch(w,{method:"POST",headers:l,body:JSON.stringify(e)}),a=await s.json();F(a),a&&a.transaction_link&&window.open(a.transaction_link,"_blank","noopener,noreferrer")}catch{U(i("Transaction failed. Please try again."))}finally{B(!1),T(null)}},q=e=>{navigator.clipboard.writeText(e)},G=async()=>{if(B(!0),U(""),F(null),!V){U(i("Please select a network.")),B(!1);return}try{let e={type_trans:"sale",total_crypto:m,crypto_id:String(n.id),phone_number:f.replace(/\s+/g,""),network_id:V.id,amount:x,hash:W},t=localStorage.getItem("accessToken"),l={"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},s=await fetch(w,{method:"POST",headers:l,body:JSON.stringify(e)}),a=await s.json();F(a),a&&a.transaction_link&&window.open(a.transaction_link,"_blank","noopener,noreferrer"),setTimeout(()=>{X(!1),F(null),J(""),T(null)},2e3)}catch{U(i("Transaction failed. Please try again."))}finally{B(!1)}};return e?(0,t.jsxs)("div",{className:"bg-gradient-to-r rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-xs sm:max-w-md relative mx-auto mt-8",style:{background:"dark"===c.mode?"linear-gradient(135deg, rgba(30,41,59,0.85) 60%, rgba(51,65,85,0.85) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.85) 60%, rgba(226,232,240,0.85) 100%)",borderColor:"dark"===c.mode?"#334155":"#e5e7eb"},children:[(0,t.jsx)("h2",{className:"text-2xl font-extrabold mb-6 text-center",style:{color:c.colors.primary},children:"buy"===o?`${i("Buy")} ${n.name}`:"sale"===o?`${i("Sell")} ${n.name}`:`${i("Buy or Sell")} ${n.name}`}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:i("Select Network")}),(0,t.jsxs)("select",{className:`w-full p-3 rounded-lg border focus:ring-2 focus:ring-blue-400 text-lg transition-colors
            ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100":"bg-white border-slate-300 text-slate-900"}`,value:V?.id||"",onChange:e=>{D(M.find(t=>String(t.id)===e.target.value)||null)},children:[(0,t.jsx)("option",{value:"",children:i("Select a network")}),M.map(e=>(0,t.jsx)("option",{value:String(e.id),children:e.public_name||e.name},e.id))]}),V&&V.image&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,t.jsx)("img",{src:V.image,alt:V.name,className:"w-8 h-8 rounded"}),(0,t.jsx)("span",{className:"text-sm",children:V.public_name||V.name})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-6 justify-center",children:[n.logo&&(0,t.jsx)("img",{src:n.logo,alt:n.name,className:"w-14 h-14 rounded-full border-2 border-blue-400 shadow-md"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"font-bold text-lg flex items-center gap-2",children:[n.name,(0,t.jsx)("span",{className:"inline-block bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-200 px-2 py-0.5 rounded-full text-xs font-semibold border border-blue-300 ml-1",children:n.symbol})]}),(0,t.jsxs)("div",{className:"text-blue-500 text-sm font-mono",children:[i("Public Amount"),": ",n.public_amount," XOF"]})]})]}),(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("label",{className:"block mb-1 font-medium",children:"buy"===o?i("Amount (Local Currency)"):i("Amount (Crypto)")}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(p,{})}),(0,t.jsx)("input",{type:"number",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 text-lg transition-colors
              ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,value:m,onChange:e=>u(e.target.value),min:"0",placeholder:"buy"===o?i("Enter amount"):i("Enter crypto amount")})]})]}),x&&(0,t.jsx)("div",{className:`mb-4 ${"buy"===o?"text-green-600 dark:text-green-400":"text-blue-600 dark:text-blue-400"} text-center text-lg font-semibold`,children:"buy"===o?(0,t.jsxs)(t.Fragment,{children:[i("You will get"),": ",(0,t.jsxs)("span",{className:"font-bold",children:[x," ",n.symbol]})]}):(0,t.jsxs)(t.Fragment,{children:[i("You will receive"),": ",(0,t.jsxs)("span",{className:"font-bold",children:[x," XOF"]})]})}),"buy"===o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(v,{})}),(0,t.jsx)("input",{type:"text",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Wallet link"),value:O,onChange:e=>$(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(v,{})}),(0,t.jsx)("input",{type:"text",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Confirm wallet link"),value:P,onChange:e=>_(e.target.value)})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(j,{})}),(0,t.jsx)("input",{type:"tel",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Phone number"),value:f,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:"mb-4 relative",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(j,{})}),(0,t.jsx)("input",{type:"tel",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Confirm phone number"),value:C,onChange:e=>S(e.target.value)})]})]}),I&&(0,t.jsx)("div",{className:"mb-4 text-red-500 text-center font-medium",children:i(I)}),(0,t.jsxs)("button",{className:"w-full py-3 rounded-lg font-bold text-lg flex items-center justify-center gap-2 transition bg-gradient-to-r from-blue-500 to-blue-700 hover:from-blue-600 hover:to-blue-800 text-white shadow-lg active:scale-95",onClick:()=>{if(!m)return void U(i("Please fill all fields."));if(!V)return void U(i("Please select a network."));if("buy"===o){if(!O||!P||O!==P)return void U(i("Please fill all fields and confirm your wallet link."));U(""),T("wallet")}else{let e=f.replace(/\s+/g,""),t=C.replace(/\s+/g,"");if(!e||e!==t)return void U(i("Please fill all fields and confirm your phone number."));U(""),T("confirm")}},disabled:A,children:[(0,t.jsx)(h,{})," ",i("Continue")]}),"wallet"===z&&"buy"===o&&(0,t.jsx)(k,{onClose:()=>T(null),theme:c,children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2 text-center",children:i("Enter your phone number")}),(0,t.jsxs)("div",{className:"relative mb-2",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(j,{})}),(0,t.jsx)("input",{type:"tel",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                  ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Phone number"),value:f,onChange:e=>N(e.target.value)})]}),(0,t.jsxs)("div",{className:"relative mb-2",children:[(0,t.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-400",children:(0,t.jsx)(j,{})}),(0,t.jsx)("input",{type:"tel",className:`w-full p-3 pl-10 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors
                  ${"dark"===c.mode?"bg-slate-900 border-slate-600 text-slate-100 placeholder-slate-400":"bg-white border-slate-300 text-slate-900 placeholder-slate-400"}`,placeholder:i("Confirm phone number"),value:C,onChange:e=>S(e.target.value)})]}),I&&(0,t.jsx)("div",{className:"mb-2 text-red-500 text-center",children:i(I)}),(0,t.jsxs)("button",{className:"w-full bg-gradient-to-r from-blue-500 to-blue-700 text-white py-2 rounded-lg font-bold text-lg shadow-md hover:from-blue-600 hover:to-blue-800 transition mt-2 flex items-center justify-center gap-2",onClick:()=>{if(!O||O!==P)return void U(i("Wallet links do not match."));let e=f.replace(/\s+/g,""),t=C.replace(/\s+/g,"");e&&e===t?(U(""),T("confirm")):U(i("Please fill all fields and confirm your phone number."))},children:[(0,t.jsx)(h,{})," ",i("Continue")]})]})}),"confirm"===z&&(0,t.jsx)(k,{onClose:()=>T(null),theme:c,children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2 text-center",children:i("Confirm your transaction")}),(0,t.jsxs)("div",{className:"mb-2",children:["Type: ",(0,t.jsx)("span",{className:"font-semibold",children:o?.toUpperCase()})]}),(0,t.jsxs)("div",{className:"mb-2",children:["Crypto: ",(0,t.jsx)("span",{className:"font-semibold",children:n.name})]}),(0,t.jsxs)("div",{className:"mb-2",children:["Amount: ",(0,t.jsx)("span",{className:"font-semibold",children:"sale"===o?`${x} XOF`:`${x} ${n.symbol}`})]}),(0,t.jsxs)("div",{className:"mb-2",children:["Phone: ",(0,t.jsx)("span",{className:"font-semibold",children:f})]}),(0,t.jsxs)("div",{className:"mb-2",children:["Network: ",(0,t.jsx)("span",{className:"font-semibold",children:V?.public_name||V?.name})]}),"buy"===o&&(0,t.jsxs)("div",{className:"mb-2",children:["Wallet Link: ",(0,t.jsx)("span",{className:"font-semibold break-all",children:O})]}),(0,t.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-700 text-white py-2 rounded-lg font-bold text-lg shadow-md hover:from-green-600 hover:to-green-800 transition mt-4 flex items-center justify-center gap-2",onClick:Y,disabled:A,children:[A?i("Processing..."):(0,t.jsx)(h,{})," ",i("Confirm")]})]})}),E&&(0,t.jsxs)("div",{className:"mt-6 p-4 rounded-lg text-center shadow-lg",style:{background:"dark"===c.mode?"linear-gradient(135deg, rgba(30,41,59,0.95) 60%, rgba(51,65,85,0.95) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.95) 60%, rgba(226,232,240,0.95) 100%)"},children:["sale"===o&&E?.wallet_address&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"mb-2 font-bold",children:[i("Sell Wallet Address"),":"]}),(0,t.jsx)("div",{className:"mb-2 break-all text-blue-600 dark:text-blue-300 font-mono text-lg",children:E.wallet_address}),(0,t.jsx)("button",{className:"bg-gradient-to-r from-blue-500 to-blue-700 text-white px-3 py-1 rounded-lg font-semibold mt-2",onClick:()=>q(E.wallet_address),children:i("Copy")}),(0,t.jsx)("div",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:i("Send your crypto to this address to complete the sale.")})]}),"buy"===o&&(0,t.jsxs)("div",{className:"text-green-600 dark:text-green-400 font-bold flex flex-col items-center gap-2",children:[(0,t.jsx)(h,{className:"text-2xl"}),i("Your buy request has been submitted!")]})]}),H&&(0,t.jsx)(k,{onClose:()=>R(null),theme:c,children:(0,t.jsxs)("div",{className:"p-6 flex flex-col items-center",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-4 text-center",children:i("Continue Payment")}),(0,t.jsx)("button",{onClick:()=>window.open(H,"_blank","noopener,noreferrer"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors font-bold text-lg shadow-md",children:i("Click to continue payment")})]})}),K&&"sale"===o&&(0,t.jsx)(k,{onClose:()=>X(!1),theme:c,children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-2 text-center",children:i("Adresse de vente")}),(0,t.jsxs)("div",{className:"mb-2 relative flex items-center",children:[(0,t.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors font-mono",value:n.sale_adress||"",readOnly:!0}),(0,t.jsx)("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-blue-500 hover:text-blue-700",onClick:()=>q(n.sale_adress||""),title:i("Copier"),children:(0,t.jsx)(g,{})})]}),(0,t.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"Copiez l'adresse de vente pour vendre votre crypto."}),(0,t.jsx)("div",{className:"mb-4 relative",children:(0,t.jsx)("input",{type:"text",className:"w-full p-3 rounded-lg border focus:ring-2 focus:ring-blue-400 transition-colors",placeholder:i("Entrez le hash de la transaction"),value:W,onChange:e=>J(e.target.value)})}),I&&(0,t.jsx)("div",{className:"mb-2 text-red-500 text-center font-medium",children:i(I)}),E&&(0,t.jsx)("div",{className:"mb-2 text-green-600 text-center font-medium",children:i("Votre vente a été soumise avec succès!")}),(0,t.jsxs)("button",{className:"w-full bg-gradient-to-r from-green-500 to-green-700 text-white py-2 rounded-lg font-bold text-lg shadow-md hover:from-green-600 hover:to-green-800 transition mt-2 flex items-center justify-center gap-2",onClick:G,disabled:A||!W,children:[A?i("Traitement..."):(0,t.jsx)(h,{})," ",i("OK")]})]})})]}):(0,t.jsx)("div",{className:"p-4 bg-yellow-100 text-yellow-800 rounded-lg text-center",children:i("Please verify your account to buy or sell crypto.")})}function k({children:e,onClose:l,theme:s}){return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{backdropFilter:"blur(6px)"},children:(0,t.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full relative border",style:{background:"dark"===s.mode?"linear-gradient(135deg, rgba(30,41,59,0.97) 60%, rgba(51,65,85,0.97) 100%)":"linear-gradient(135deg, rgba(255,255,255,0.97) 60%, rgba(226,232,240,0.97) 100%)",borderColor:"dark"===s.mode?"#334155":"#e5e7eb"},children:[(0,t.jsx)("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl font-bold",onClick:l,children:"×"}),e]})})}function C(e){return u({tag:"svg",attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M16 8c-0.020-1.045-0.247-2.086-0.665-3.038-0.417-0.953-1.023-1.817-1.766-2.53s-1.624-1.278-2.578-1.651c-0.953-0.374-1.978-0.552-2.991-0.531-1.013 0.020-2.021 0.24-2.943 0.646-0.923 0.405-1.758 0.992-2.449 1.712s-1.237 1.574-1.597 2.497c-0.361 0.923-0.533 1.914-0.512 2.895 0.020 0.981 0.234 1.955 0.627 2.847 0.392 0.892 0.961 1.7 1.658 2.368s1.523 1.195 2.416 1.543c0.892 0.348 1.851 0.514 2.799 0.493 0.949-0.020 1.89-0.227 2.751-0.608 0.862-0.379 1.642-0.929 2.287-1.604s1.154-1.472 1.488-2.335c0.204-0.523 0.342-1.069 0.415-1.622 0.019 0.001 0.039 0.002 0.059 0.002 0.552 0 1-0.448 1-1 0-0.028-0.001-0.056-0.004-0.083h0.004zM14.411 10.655c-0.367 0.831-0.898 1.584-1.55 2.206s-1.422 1.112-2.254 1.434c-0.832 0.323-1.723 0.476-2.608 0.454-0.884-0.020-1.759-0.215-2.56-0.57-0.801-0.354-1.526-0.867-2.125-1.495s-1.071-1.371-1.38-2.173c-0.31-0.801-0.457-1.66-0.435-2.512s0.208-1.694 0.551-2.464c0.342-0.77 0.836-1.468 1.441-2.044s1.321-1.029 2.092-1.326c0.771-0.298 1.596-0.438 2.416-0.416s1.629 0.202 2.368 0.532c0.74 0.329 1.41 0.805 1.963 1.387s0.988 1.27 1.272 2.011c0.285 0.74 0.418 1.532 0.397 2.32h0.004c-0.002 0.027-0.004 0.055-0.004 0.083 0 0.516 0.39 0.94 0.892 0.994-0.097 0.544-0.258 1.075-0.481 1.578z"},child:[]}]})(e)}function S(){let e,n,o,{t:i,i18n:c}=(0,r.useTranslation)(),{theme:d}=(0,a.useTheme)(),[m,u]=(0,l.useState)([]),[x,g]=(0,l.useState)(!0),[p,j]=(0,l.useState)(null),[v,y]=(0,l.useState)(!1),[w,k]=(0,l.useState)(null),[S,O]=(0,l.useState)(""),[$,P]=(0,l.useState)(!1),[_,z]=(0,l.useState)(null),[T,A]=(0,l.useState)(null),[B,E]=(0,l.useState)(null),[F,I]=(0,l.useState)(!1),[U,M]=(0,l.useState)(!1),[L,V]=(0,l.useState)(""),[D,H]=(0,l.useState)(null),[R,W]=(0,l.useState)(!0),[J,K]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{if(J){g(!0),j(null);try{let e=localStorage.getItem("accessToken"),t=await s.default.get(`https://api.blaffa.net/blaffa/crypto?type_trans=${J}`,{headers:{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}});u(Array.isArray(t.data.results)?t.data.results:[])}catch{j(i("Failed to fetch cryptocurrencies"))}finally{g(!1)}}})();let e=localStorage.getItem("userId");if(e)O(e);else{let e=localStorage.getItem("accessToken");e&&s.default.get("/auth/me",{headers:{Authorization:`Bearer ${e}`}}).then(e=>{let t=e.data;t&&t.id&&(localStorage.setItem("userId",t.id.toString()),O(t.id.toString()))}).catch(()=>{})}c.changeLanguage("fr"),console.log("Current language:",c.language,"Back:",i("Back"))},[c.language,J]),(0,l.useEffect)(()=>{if(!S)return;let e=!0;return(async()=>{I(!0);try{let t=localStorage.getItem("accessToken"),l=await fetch("https://api.blaffa.net/auth/check-user-account-status",{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({user_id:S})}),s=await l.json(),a=s.is_verified??s.is_verify??!1;e&&k(!!a)}catch{e&&k(!1)}finally{e&&I(!1)}})(),()=>{e=!1}},[S]);let X=async e=>{if(e.preventDefault(),P(!0),z(null),!T||!B){z(i("Please select both images.")),P(!1);return}try{let e=new FormData;for(let t of(e.append("file",T),e.append("image",B),console.log("FormData contents:"),e.entries()))console.log(t[0]+":",t[1]);let t=localStorage.getItem("accessToken"),l=await fetch("https://api.blaffa.net/blaffa/upload/file",{method:"POST",headers:{...t?{Authorization:`Bearer ${t}`}:{}},body:e});if(console.log("Response status:",l.status),console.log("Response headers:",Object.fromEntries(l.headers.entries())),!l.ok){let e=await l.text();throw console.error("Error response body:",e),Error(`Upload failed: ${l.status} ${l.statusText}`)}let s=await l.json();console.log("Upload response:",s),y(!1),V(i("Images uploaded. Please wait for admin verification.")),M(!0),k(!1)}catch(e){console.error("Upload error:",e),z(i("Failed to upload images. Try again."))}finally{P(!1)}};return(0,t.jsxs)("div",{className:`min-h-screen bg-gradient-to-br ${d.colors.a_background} p-2 sm:p-4 flex flex-col items-center`,children:[R&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${d.colors.a_background} rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-xs sm:max-w-md relative flex flex-col items-center`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center",children:i("Choose Transaction Type")}),(0,t.jsxs)("div",{className:"flex flex-col gap-4 w-full",children:[(0,t.jsx)("button",{className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg text-lg font-semibold hover:bg-green-700 transition-all",onClick:()=>{K("buy"),W(!1)},children:i("Buy Crypto")}),(0,t.jsx)("button",{className:"w-full px-6 py-3 bg-yellow-500 text-white rounded-lg text-lg font-semibold hover:bg-yellow-600 transition-all",onClick:()=>{K("sale"),W(!1)},children:i("Sell Crypto")})]})]})}),(0,t.jsx)("button",{onClick:()=>window.history.back(),className:`fixed top-3 left-3 z-50 w-10 h-10 flex items-center justify-center rounded-full shadow-md
           bg-transparent text-blue-600 dark:text-blue-200  transition-all`,"aria-label":i("Back to Crypto"),style:{backdropFilter:"blur(4px)"},children:(0,t.jsx)(b,{className:"text-xl"})}),(0,t.jsxs)("div",{className:"w-full max-w-screen-sm",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 mb-6 sm:mb-8",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-center sm:text-left w-full sm:w-auto",children:i("Cryptocurrencies")}),(0,t.jsx)("div",{className:"flex justify-center sm:justify-end w-full sm:w-auto relative",children:(e="rounded-full flex items-center justify-center shadow-md transition-all",n="w-9 h-9 text-xl",o="fixed top-3 right-3 z-50 sm:static sm:top-auto sm:right-auto",F?(0,t.jsx)("span",{className:`${e} ${n} ${o} bg-gray-300 animate-spin text-blue-500`,title:i("Checking..."),children:(0,t.jsx)(C,{})}):!0===w?(0,t.jsx)("span",{className:`${e} ${n} ${o} bg-green-500 text-white`,title:i("Verified"),children:(0,t.jsx)(h,{})}):(0,t.jsx)("span",{className:`${e} ${n} ${o} bg-yellow-400 text-white`,title:i("Not Verified"),children:(0,t.jsx)(f,{})}))})]}),p&&(0,t.jsx)("div",{className:"mb-4 p-3 sm:p-4 bg-red-100 border border-red-400 text-red-700 rounded text-sm sm:text-base",children:p}),J&&!R&&(D?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:`mb-4 flex items-center gap-2 rounded-lg shadow-sm font-semibold transition-all
                px-2 py-1 sm:px-4 sm:py-2
                text-base sm:text-lg
                ${"dark"===d.mode?"bg-slate-800 text-blue-300 hover:bg-slate-700":"bg-blue-50 text-blue-700 hover:bg-blue-100"}
                `,style:{border:`1px solid ${d.colors.accent}`},onClick:()=>H(null),children:[(0,t.jsx)(b,{className:"text-lg sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:i("Back to Cryptos")})]}),("buy"===J||"sale"===J)&&(0,t.jsx)(N,{isVerified:!0===w,crypto:D,typeTrans:J})]}):x?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[200px] sm:min-h-[300px]",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-4 border-blue-500/30 border-t-blue-500"})}):(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6",children:m.map(e=>(0,t.jsxs)("div",{className:`group relative overflow-hidden bg-gradient-to-br ${d.colors.s_background} border border-slate-600/30 rounded-2xl p-4 sm:p-6 flex flex-col items-center shadow-md hover:scale-[1.03] active:scale-95 transition-all duration-200 cursor-pointer`,onClick:()=>{!S?j(i("User ID not found. Please log in.")):w?H(e):y(!0)},children:[(0,t.jsx)("img",{src:e.logo,alt:e.name,className:"w-10 h-10 sm:w-12 sm:h-12 object-contain mb-3 sm:mb-4 rounded-full border border-slate-300 bg-white"}),(0,t.jsx)("div",{className:"font-bold text-base sm:text-lg mb-1 sm:mb-2 text-center",children:e.name}),(0,t.jsx)("div",{className:"text-slate-400 text-xs sm:text-sm mb-1",children:e.symbol}),(0,t.jsxs)("div",{className:"text-blue-500 font-mono text-2xl sm:text-3xl font-extrabold",children:[e.public_amount,"xof"]})]},e.id))})),v&&!w&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${d.colors.a_background} rounded-2xl shadow-2xl p-4 sm:p-8 w-full max-w-xs sm:max-w-md relative`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-center",children:i("Account Verification Required")}),(0,t.jsxs)("form",{onSubmit:X,children:[(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("label",{className:"block mb-1 sm:mb-2 text-sm sm:text-base font-semibold",children:i("Upload your image (face)")}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>A(e.target.files?.[0]||null),className:"w-full text-xs sm:text-sm border rounded p-2"}),T&&(0,t.jsx)("div",{className:"mt-2 flex justify-center",children:(0,t.jsx)("img",{src:URL.createObjectURL(T),alt:"Preview",className:"h-20 w-20 object-cover rounded shadow"})})]}),(0,t.jsxs)("div",{className:"mb-3 sm:mb-4",children:[(0,t.jsx)("label",{className:"block mb-1 sm:mb-2 text-sm sm:text-base font-semibold",children:i("Upload your card image (ID card)")}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>E(e.target.files?.[0]||null),className:"w-full text-xs sm:text-sm border rounded p-2"}),B&&(0,t.jsx)("div",{className:"mt-2 flex justify-center",children:(0,t.jsx)("img",{src:URL.createObjectURL(B),alt:"Preview",className:"h-20 w-20 object-cover rounded shadow"})})]}),_&&(0,t.jsx)("div",{className:"mb-2 text-red-600 text-xs sm:text-sm text-center",children:_}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 mt-4",children:[(0,t.jsx)("button",{type:"button",className:"w-full sm:flex-1 px-4 py-2 bg-gray-400 dark:bg-slate-700 rounded hover:bg-gray-300 dark:hover:bg-slate-600 text-sm sm:text-base",onClick:()=>y(!1),disabled:$,children:i("Cancel")}),(0,t.jsx)("button",{type:"submit",className:"w-full sm:flex-1 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm sm:text-base",disabled:$,children:$?i("Uploading..."):i("Upload & Submit")})]})]})]})}),U&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-2 sm:px-0",children:(0,t.jsxs)("div",{className:`bg-gradient-to-r ${d.colors.a_background} rounded-2xl shadow-2xl p-6 sm:p-8 w-full max-w-xs sm:max-w-md relative`,children:[(0,t.jsx)("h2",{className:"text-lg sm:text-xl font-bold mb-4 text-center text-green-600",children:i("Success")}),(0,t.jsx)("div",{className:"mb-6 text-center text-base sm:text-lg",children:L}),(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)("button",{className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-base",onClick:()=>M(!1),children:i("Close")})})]})})]})]})}e.s(["default",()=>S],12866)}]);