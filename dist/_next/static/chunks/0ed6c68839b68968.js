(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let t=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},73884,e=>{"use strict";let t=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],73884)},39385,e=>{"use strict";var t=e.i(43476),a=e.i(71645);e.i(85269);var r=e.i(22831),s=e.i(18566),l=e.i(59919),o=e.i(71689),i=e.i(73884),n=e.i(63816);function d(){let{t:e}=(0,r.useTranslation)(),{theme:d}=(0,l.useTheme)(),c=(0,s.useSearchParams)(),u=(0,s.useRouter)(),m=c.get("origin")||"deposit",p=c.get("platform")||"Plateforme",x=c.get("platform_id")||"",[h,b]=(0,a.useState)(null),[f,y]=(0,a.useState)(null),[g,j]=(0,a.useState)([]),[v,k]=(0,a.useState)(""),[N,I]=(0,a.useState)(x),[C,w]=(0,a.useState)([]),[A,$]=(0,a.useState)(!0),[D,S]=(0,a.useState)(null),[z,T]=(0,a.useState)(null);(0,a.useEffect)(()=>{x&&I(x)},[x]);let _=async()=>{let e=localStorage.getItem("accessToken");if(!e)return void j([]);try{let t=await n.default.get("/blaffa/id_link",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(200===t.status){let e=t.data,a=[];Array.isArray(e)?a=e:e&&Array.isArray(e.results)?a=e.results:e&&Array.isArray(e.data)?a=e.data:e&&e.id&&e.link&&e.app_name&&(a=[e]),j(a)}else j([])}catch(e){console.error("Error fetching bet IDs:",e),j([])}},U=async()=>{let e=localStorage.getItem("accessToken");if(e)try{let t=await n.default.get("/blaffa/app_name",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});200===t.status&&w(Array.isArray(t.data)?t.data:[])}catch(e){console.error("Error fetching apps:",e)}},B=async t=>{if(t.preventDefault(),b(null),y(null),!N||!v.trim())return void b(e("Veuillez sélectionner une application et saisir un ID de pari."));let a=localStorage.getItem("accessToken");if(!a)return void b(e("Vous devez être connecté pour ajouter un ID de pari."));try{let t=(await n.default.get(`/blaffa/search-user?app_id=${N}&userid=${encodeURIComponent(v.trim())}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}})).data;if(t&&t.UserId&&0!==t.UserId){if(27!==t.CurrencyId)return void S({type:"error",title:e("Compte non trouvé"),message:e("Aucun compte n'a été trouvé avec l'ID {{betid}} ou votre compte n'est pas configuré en Franc CFA (XOF - Afrique de l'Ouest).",{betid:v.trim()})});S({type:"confirm",data:{Name:t.Name,UserId:t.UserId,CurrencyId:t.CurrencyId}}),T({appId:N,betId:v.trim()})}else S({type:"error",title:e("Compte non trouvé"),message:e("Aucun compte n'a été trouvé avec l'ID {{betid}}.",{betid:v.trim()})})}catch{S({type:"error",title:e("Erreur de validation"),message:e("Échec de la validation de l'ID de pari.")})}},E=async()=>{if(!z)return;S(null);let{appId:t,betId:a}=z,r=localStorage.getItem("accessToken");try{let s=await n.default.post("/blaffa/id_link",{link:a,app_name_id:t},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});(200===s.status||201===s.status)&&(y(e("ID de pari ajouté avec succès !")),setTimeout(()=>{"deposit"===m?u.push("/deposit"):"withdraw"===m?u.push("/withdraw"):u.back()},1500))}catch(t){b(t.response?.data?.detail||e("Failed to add bet ID"))}},F=async t=>{if(!confirm(e("Are you sure you want to delete this bet ID?")))return;let a=localStorage.getItem("accessToken");try{let e=await n.default.delete(`/blaffa/id_link/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});200===e.status&&j(e=>e.filter(e=>e.id!==t))}catch(t){b(t.response?.data?.message||e("Failed to delete bet ID"))}};return((0,a.useEffect)(()=>{(async()=>{$(!0),await Promise.all([U(),_()]),$(!1)})()},[]),A)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,t.jsxs)("div",{className:`min-h-screen ${d.colors.a_background} font-sans`,children:[(0,t.jsxs)("header",{className:"px-4 h-16 flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>u.back(),className:"p-2",children:(0,t.jsx)(o.ArrowLeft,{size:28,className:d.colors.text})}),(0,t.jsx)("h1",{className:`text-2xl font-bold ${d.colors.text}`,children:"deposit"===m?"Dépôt - ID Utilisateur":"Retrait - ID Utilisateur"})]}),(0,t.jsxs)("main",{className:"w-full px-6 pt-6",children:[(0,t.jsx)("div",{className:"mb-10",children:(0,t.jsxs)("h2",{className:`text-xl font-bold ${d.colors.text}`,children:["2. Choisissez ou créez votre ID pour ",p]})}),h&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-600 rounded-xl font-medium",children:h}),f&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-green-50 text-green-600 rounded-xl font-medium",children:f}),(0,t.jsxs)("form",{onSubmit:B,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("label",{className:`${d.colors.text} font-bold text-lg block px-1`,children:"Nouvel identifiant"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),placeholder:"Entrez votre ID",className:`w-full h-16 px-6 rounded-2xl border ${"dark"===d.mode?"border-slate-700":"border-gray-200"} ${d.colors.a_background} text-xl font-medium focus:outline-none focus:border-blue-500 transition-all placeholder:text-gray-400`})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>u.back(),className:"h-16 border-2 border-[#1e4a8e] text-[#1e4a8e] dark:border-blue-400 dark:text-blue-400 font-bold text-xl rounded-2xl hover:bg-blue-50 dark:hover:bg-blue-900/10 transition-colors",children:"Annuler"}),(0,t.jsx)("button",{type:"submit",className:"h-16 text-white font-bold text-xl rounded-2xl shadow-lg transition-all active:scale-[0.98]",style:{backgroundColor:"dark"===d.mode?d.colors.primary:"#1a4384"},children:"Enregistrer"})]})]}),!A&&g.length>0&&(0,t.jsxs)("div",{className:"mt-16 space-y-4",children:[(0,t.jsx)("h3",{className:`${d.colors.d_text} font-bold mb-4 px-1 opacity-60`,children:e("Vos IDs sauvegardés")}),g.filter(e=>e.app_name?.id===N).map(e=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-4 ${d.colors.a_background} rounded-2xl border ${"dark"===d.mode?"border-slate-800":"border-gray-100"}`,children:[(0,t.jsx)("span",{className:`text-lg font-bold ${d.colors.text}`,children:e.link}),(0,t.jsx)("button",{onClick:()=>F(e.id),className:"p-2 text-red-500",children:(0,t.jsx)(i.XCircle,{size:20})})]},e.id))]})]}),D&&(0,t.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/40 backdrop-blur-[2px] animate-in fade-in duration-200",children:(0,t.jsx)("div",{className:`${d.colors.a_background} rounded-[2rem] shadow-2xl w-full max-w-sm p-8 overflow-hidden animate-in zoom-in-95 duration-200 border ${"dark"===d.mode?"border-slate-800":"border-gray-100"}`,children:"confirm"===D.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:`text-2xl font-bold mb-6 ${d.colors.text}`,children:"Compte trouvé"}),(0,t.jsxs)("div",{className:`space-y-2 mb-10 text-lg leading-relaxed ${d.colors.text}`,children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-bold opacity-60",children:"Nom :"})," ",D.data.Name]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-bold opacity-60",children:"Devise :"})," ",D.data.CurrencyId]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"font-bold opacity-60",children:"UserID :"})," ",D.data.UserId]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>{S(null),T(null)},className:"font-medium text-lg px-2",style:{color:d.colors.primary},children:"Annuler"}),(0,t.jsx)("button",{onClick:E,className:"text-white font-bold py-3 px-8 rounded-2xl transition-all",style:{backgroundColor:"dark"===d.mode?d.colors.primary:"#1a4384"},children:"Confirmer"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:`text-2xl font-bold mb-4 ${d.colors.text}`,children:D.title}),(0,t.jsx)("p",{className:`${d.colors.d_text} opacity-70 mb-8 leading-relaxed font-medium`,children:D.message}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{onClick:()=>S(null),className:"text-white font-bold py-3 px-8 rounded-2xl transition-all",style:{backgroundColor:"dark"===d.mode?d.colors.primary:"#1a4384"},children:"Quitter"})})]})})})]})}function c(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{children:"Loading..."}),children:(0,t.jsx)(d,{})})}e.s(["default",()=>c])}]);