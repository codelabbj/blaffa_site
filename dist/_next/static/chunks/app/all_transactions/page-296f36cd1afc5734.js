(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{978:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]])},1574:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var r=s(5155),a=s(2115),n=s(978),l=s(4870);let o=(0,s(9946).A)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);var i=s(9397),d=s(4416),c=s(9074),m=s(5448),x=s(4357),u=s(1586),h=s(9420),p=s(6767),b=s(7280),g=s(3464),f=s(5077),y=s(4830);function v(){let[e,t]=(0,a.useState)([]),[s,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(1),[A,_]=(0,a.useState)(!0),C=(0,a.useRef)(null),[M,z]=(0,a.useState)(!1),[S,E]=(0,a.useState)(null),[T,D]=(0,a.useState)(!1),{theme:I}=(0,b.D)(),R=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s?z(!0):v(!0);try{console.log("Fetching transactions...");let s=localStorage.getItem("accessToken");if(console.log("Token exists:",!!s),!s)throw console.error("No access token found"),Error("Authentication required. Please log in again.");let r=await f.A.get("/blaffa/historic".concat(e>1?"?page=".concat(e):""),{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}});console.log("Response status:",r.status);let a=r.data;console.log("Received data:",a),console.log("Received data for page:",e,a);let n=a.results.map(e=>e.transaction).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime());t(t=>1===e?n:[...t,...n]),_(!!a.next),N(null)}catch(t){console.error("Error in fetchTransactions:",t);let e="Failed to load transactions";if(g.A.isAxiosError(t)){var r,a;e=(null==(a=t.response)||null==(r=a.data)?void 0:r.message)||t.message}else t instanceof Error&&(e=t.message);N(e),e.toLowerCase().includes("authenticat")&&console.log("Authentication error, redirecting to login...")}finally{v(!1),z(!1)}},[]),F=(0,a.useCallback)(e=>{!s&&e&&(C.current&&C.current.disconnect(),C.current=new IntersectionObserver(e=>{e[0].isIntersecting&&A&&k(e=>e+1)}),C.current.observe(e))},[s,A]);(0,a.useEffect)(()=>{w>1&&R(w,!1)},[w]),(0,a.useEffect)(()=>{R(1,!1)},[]),(0,a.useEffect)(()=>()=>{C.current&&C.current.disconnect()},[]);let L=e=>new Date(e).toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1,timeZone:"UTC"}),V=e=>new Intl.NumberFormat("fr-BJ",{style:"currency",currency:"XOF",currencyDisplay:"narrowSymbol",maximumFractionDigits:0}).format(e),q=e=>"deposit"===e||"buy"===e?(0,r.jsx)(n.A,{size:16}):(0,r.jsx)(l.A,{size:16}),O=e=>{let{status:t,type_trans:s}=e;if(("sale"===s||"buy"===s)&&"payment_init_success"===t)return(0,r.jsx)("span",{className:"bg-green-500/10 text-green-500 text-xs font-medium me-2 px-2.5 py-0.5 rounded",children:"payment_init_success"});let a={completed:{text:"Termin\xe9",className:"bg-green-100 text-green-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300"},accept:{text:"accepter",className:"bg-green-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"},pending:{text:"En cours",className:"bg-yellow-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"},failed:{text:"\xc9chou\xe9",className:"bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300"},error:{text:"\xc9chou\xe9",className:"bg-red-100 text-red-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-red-900 dark:text-red-300"},default:{text:t,className:"bg-gray-100 text-gray-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-gray-700 dark:text-gray-300"},Approve:{text:"Approve",className:"bg-green-100 text-yellow-800 text-xs font-medium me-2 px-2.5 py-0.5 rounded dark:bg-yellow-900 dark:text-yellow-300"}},{text:n,className:l}=a[t.toLowerCase()]||a.default;return(0,r.jsx)("span",{className:l,children:n})};function Y(e){navigator&&navigator.clipboard&&navigator.clipboard.writeText(e)}return s&&0===e.length?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-orange-500"})}):j?(0,r.jsx)("div",{className:"p-4 max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[(0,r.jsx)("strong",{className:"font-bold",children:"Erreur! "}),(0,r.jsx)("span",{className:"block sm:inline",children:j}),(0,r.jsx)("button",{onClick:()=>{k(1),R(1,!0)},className:"absolute top-0 bottom-0 right-0 px-4 py-3",children:(0,r.jsx)(o,{className:"h-5 w-5 ".concat(M?"animate-spin":"")})})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br ".concat(I.colors.a_background," p-4"),children:[(0,r.jsx)(y.A,{}),(0,r.jsx)("style",{children:"\n          @keyframes slideInUp {\n            from {\n              opacity: 0;\n              transform: translateY(20px) scale(0.95);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0) scale(1);\n            }\n          }\n          \n          @keyframes shimmer {\n            0% { background-position: -200px 0; }\n            100% { background-position: calc(200px + 100%) 0; }\n          }\n          \n          @keyframes modalSlideIn {\n            from {\n              opacity: 0;\n              transform: translateY(30px) scale(0.9);\n            }\n            to {\n              opacity: 1;\n              transform: translateY(0) scale(1);\n            }\n          }\n          \n          @keyframes backdropFadeIn {\n            from {\n              opacity: 0;\n              backdrop-filter: blur(0px);\n            }\n            to {\n              opacity: 1;\n              backdrop-filter: blur(8px);\n            }\n          }\n          \n          .shimmer-effect {\n            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);\n            background-size: 200px 100%;\n            animation: shimmer 2s infinite;\n          }\n          \n          .modal-backdrop {\n            animation: backdropFadeIn 0.3s ease-out;\n          }\n          \n          .modal-content {\n            animation: modalSlideIn 0.4s ease-out;\n          }\n        "}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold  mb-2",children:"Toutes les transactions"}),(0,r.jsx)("p",{className:"",children:"Suivez toutes vos activit\xe9s financi\xe8res"})]}),(0,r.jsxs)("button",{onClick:()=>window.history.back(),className:"flex items-center  bg-gradient-to-r from-slate-700/50 to-slate-600/50 hover:from-slate-600/50 hover:to-slate-500/50 px-6 py-3 rounded-xl border border-slate-600/30 hover:border-slate-500/50 transition-all duration-300 backdrop-blur-sm shadow-lg hover:shadow-xl group mt-4 md:mt-0",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 group-hover:-translate-x-1 transition-transform duration-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(I.colors.s_background," backdrop-blur-sm rounded-3xl shadow-2xl border border-slate-600/50 overflow-hidden"),children:(0,r.jsx)("div",{className:" space-y-4",children:0===e.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 px-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-700 rounded-2xl p-6 mb-6 shadow-2xl border border-slate-600/50",children:(0,r.jsx)(i.A,{className:"w-12 h-12 text-slate-400 mx-auto"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Aucune transaction trouv\xe9e"}),(0,r.jsx)("p",{className:"text-slate-400 text-center max-w-md leading-relaxed",children:"Votre historique de transactions appara\xeetra ici une fois que vous commencerez \xe0 effectuer des paiements."})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[e.map((t,s)=>{let a=s===e.length-1;return(0,r.jsxs)("div",{ref:a?F:null,className:"bg-gradient-to-br ".concat(I.colors.s_background," rounded-2xl p-4 shadow-lg border border-slate-700/50 backdrop-blur-sm hover:border-slate-600/70 transition-all duration-300 relative overflow-hidden"),style:{animation:"slideInUp 0.6s ease-out ".concat(100*s,"ms both")},children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-12 w-12 rounded-2xl flex items-center justify-center ".concat("deposit"===t.type_trans?"bg-gradient-to-br from-green-500/20 to-emerald-600/20 text-green-400":"bg-gradient-to-br from-blue-500/20 to-indigo-600/20 text-blue-400"),children:q(t.type_trans)}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium ",children:"deposit"===t.type_trans?"D\xe9p\xf4t":"withdrawal"===t.type_trans?"Retrait":"buy"===t.type_trans?"Achat":"sale"===t.type_trans?"Vente":t.type_trans}),(0,r.jsx)("div",{className:"text-sm ",children:t.phone_number})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"font-bold ".concat("deposit"===t.type_trans?"text-green-400":"text-blue-400"),children:["deposit"===t.type_trans?"+":"-",V(t.amount)]}),(0,r.jsx)("div",{className:"text-xs ",children:L(t.created_at)})]})]}),(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-700/50 flex justify-between items-center",children:[(0,r.jsx)(O,{status:t.status,type_trans:t.type_trans}),(0,r.jsx)("button",{onClick:()=>{E(t),D(!0)},className:"text-xs bg-slate-700/50 hover:bg-slate-600/50 text-white px-3 py-1 rounded-lg transition-colors",children:"Voir d\xe9tails"})]})]},t.id)}),s&&A&&(0,r.jsx)("div",{className:"flex justify-center py-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"})})]})})})]}),T&&S&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4 modal-backdrop",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-800/95 to-slate-700/95 backdrop-blur-xl rounded-3xl w-full max-w-lg shadow-2xl border border-slate-600/50 modal-content max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"relative p-6 pb-0",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold text-white mb-1",children:"D\xe9tails de la transaction"}),(0,r.jsx)("p",{className:"text-slate-400 text-sm",children:"Consultez les informations de votre transaction"})]}),(0,r.jsx)("button",{onClick:()=>D(!1),className:"w-10 h-10 rounded-xl bg-slate-700/50 hover:bg-slate-600/50 text-slate-400 hover:text-white transition-all duration-300 flex items-center justify-center group",children:(0,r.jsx)(d.A,{size:20,className:"group-hover:rotate-90 transition-transform duration-300"})})]}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-slate-700/50 to-slate-600/50 backdrop-blur-sm rounded-2xl p-4 border border-slate-600/30",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center transition-all duration-300 ".concat("deposit"===S.type_trans?"bg-gradient-to-br from-green-500/20 to-emerald-600/20 text-green-400 shadow-lg shadow-green-500/20":"bg-gradient-to-br from-blue-500/20 to-indigo-600/20 text-blue-400 shadow-lg shadow-blue-500/20"),children:q(S.type_trans)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-xl text-white",children:"deposit"===S.type_trans?"D\xe9p\xf4t":"withdrawal"===S.type_trans?"Retrait":"buy"===S.type_trans?"Achat":"sale"===S.type_trans?"Vente":S.type_trans}),(0,r.jsx)(O,{status:S.status,type_trans:S.type_trans})]}),(0,r.jsxs)("div",{className:"flex items-center text-slate-400 text-sm",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),L(S.created_at)]})]})]})})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:(0,r.jsx)("div",{className:"bg-gradient-to-br from-slate-900/50 to-slate-800/50 rounded-2xl p-6 border border-slate-600/30",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-slate-400 text-sm mb-2 font-medium",children:"Montant de la transaction"}),(0,r.jsxs)("div",{className:"text-4xl font-bold mb-2 ".concat("deposit"===S.type_trans?"text-green-400":"text-blue-400"),children:["deposit"===S.type_trans?"+":"-",V(S.amount)]}),(0,r.jsx)("div",{className:"text-slate-500 text-xs",children:"deposit"===S.type_trans?"Re\xe7u":"Envoy\xe9"})]})})}),(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/20",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center text-slate-400 text-sm font-medium",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"ID Transaction"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-white text-sm font-mono",children:S.id}),(0,r.jsx)("button",{onClick:()=>Y(S.id),className:"w-8 h-8 rounded-lg bg-slate-600/50 hover:bg-slate-500/50 text-slate-400 hover:text-white transition-all duration-300 flex items-center justify-center group",children:(0,r.jsx)(x.A,{size:14,className:"group-hover:scale-110 transition-transform duration-300"})})]})]})}),(0,r.jsx)("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/20",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center text-slate-400 text-sm font-medium",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"R\xe9f\xe9rence"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-white text-sm font-mono",children:S.reference}),(0,r.jsx)("button",{onClick:()=>Y(S.reference),className:"w-8 h-8 rounded-lg bg-slate-600/50 hover:bg-slate-500/50 text-slate-400 hover:text-white transition-all duration-300 flex items-center justify-center group",children:(0,r.jsx)(x.A,{size:14,className:"group-hover:scale-110 transition-transform duration-300"})})]})]})}),(0,r.jsx)("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/20",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center text-slate-400 text-sm font-medium",children:[(0,r.jsx)(h.A,{className:"w-4 h-4 mr-2"}),"T\xe9l\xe9phone"]}),(0,r.jsx)("span",{className:"text-white text-sm font-mono",children:S.phone_number})]})}),S.network&&(0,r.jsx)("div",{className:"bg-slate-700/30 rounded-xl p-4 border border-slate-600/20",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center text-slate-400 text-sm font-medium",children:[(0,r.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"R\xe9seau"]}),(0,r.jsx)("span",{className:"text-white text-sm",children:S.network.public_name||S.network.name})]})}),S.error_message&&(0,r.jsxs)("div",{className:"bg-gradient-to-r from-red-900/30 to-red-800/30 rounded-xl p-4 border border-red-600/30",children:[(0,r.jsx)("p",{className:"text-red-400 font-medium text-sm mb-2",children:"Message d'erreur"}),(0,r.jsx)("p",{className:"text-red-300 text-sm",children:S.error_message})]})]})}),(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsx)("button",{onClick:()=>D(!1),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-600 hover:from-blue-500 hover:to-blue-500 text-white rounded-xl transition-all duration-300 font-medium shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40",children:"Fermer"})})]})})]})}},1586:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},4416:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4870:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},5448:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]])},5765:(e,t,s)=>{Promise.resolve().then(s.bind(s,1574))},6767:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},9074:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9397:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},9420:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(9946).A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[218,464,928,521,441,684,358],()=>t(5765)),_N_E=e.O()}]);