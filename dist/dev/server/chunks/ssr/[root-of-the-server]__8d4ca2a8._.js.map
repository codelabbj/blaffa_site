{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/lib/axios.ts"],"sourcesContent":["import axios, { AxiosError, InternalAxiosRequestConfig } from 'axios';\r\n\r\nconst API_URL = 'https://api.blaffa.net';\r\n\r\n// Create axios instance with base URL\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: Array<{\r\n  resolve: (token: string) => void;\r\n  reject: (error: unknown) => void;\r\n}> = [];\r\n\r\nconst processQueue = (error: unknown, token: string | null = null) => {\r\n  failedQueue.forEach(prom => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token!);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('accessToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle token refresh\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error: AxiosError) => {\r\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n\r\n    // If the error is 401 and we haven't tried to refresh yet\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      if (isRefreshing) {\r\n        // If we're already refreshing, add the request to the queue\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject });\r\n        })\r\n          .then((token) => {\r\n            originalRequest.headers.Authorization = `Bearer ${token}`;\r\n            return api(originalRequest);\r\n          })\r\n          .catch((err) => {\r\n            return Promise.reject(err);\r\n          });\r\n      }\r\n\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        if (!refreshToken) {\r\n          // No refresh token available, redirect to login\r\n          localStorage.removeItem('accessToken');\r\n          window.location.href = '/login';\r\n          return Promise.reject(error);\r\n        }\r\n\r\n        // Try to refresh the token\r\n        const response = await axios.post(\r\n          `${API_URL}/auth/refresh`,\r\n          { refresh: refreshToken },\r\n          { headers: { 'Content-Type': 'application/json' } }\r\n        );\r\n\r\n        const { access, refresh: newRefresh } = response.data;\r\n\r\n        // Update tokens in localStorage\r\n        localStorage.setItem('accessToken', access);\r\n        if (newRefresh) {\r\n          localStorage.setItem('refreshToken', newRefresh);\r\n        }\r\n\r\n        // Update the Authorization header\r\n        api.defaults.headers.common.Authorization = `Bearer ${access}`;\r\n        originalRequest.headers.Authorization = `Bearer ${access}`;\r\n\r\n        // Process the queue\r\n        processQueue(null, access);\r\n\r\n        // Retry the original request\r\n        return api(originalRequest);\r\n      } catch (refreshError) {\r\n        // If refresh fails, clear tokens and redirect to login\r\n        console.error('Failed to refresh token:', refreshError);\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('refreshToken');\r\n        window.location.href = '/login';\r\n        processQueue(refreshError);\r\n        return Promise.reject(refreshError);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    // For other errors, just reject\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;AAEhB,sCAAsC;AACtC,MAAM,MAAM,gJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,eAAe;AACnB,IAAI,cAGC,EAAE;AAEP,MAAM,eAAe,CAAC,OAAgB,QAAuB,IAAI;IAC/D,YAAY,OAAO,CAAC,CAAA;QAClB,IAAI,OAAO;YACT,KAAK,MAAM,CAAC;QACd,OAAO;YACL,KAAK,OAAO,CAAC;QACf;IACF;IACA,cAAc,EAAE;AAClB;AAEA,wCAAwC;AACxC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,+CAA+C;AAC/C,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,0DAA0D;IAC1D,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,IAAI,cAAc;YAChB,4DAA4D;YAC5D,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,YAAY,IAAI,CAAC;oBAAE;oBAAS;gBAAO;YACrC,GACG,IAAI,CAAC,CAAC;gBACL,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;gBACzD,OAAO,IAAI;YACb,GACC,KAAK,CAAC,CAAC;gBACN,OAAO,QAAQ,MAAM,CAAC;YACxB;QACJ;QAEA,gBAAgB,MAAM,GAAG;QACzB,eAAe;QAEf,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,CAAC,cAAc;gBACjB,gDAAgD;gBAChD,aAAa,UAAU,CAAC;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB,OAAO,QAAQ,MAAM,CAAC;YACxB;YAEA,2BAA2B;YAC3B,MAAM,WAAW,MAAM,gJAAK,CAAC,IAAI,CAC/B,GAAG,QAAQ,aAAa,CAAC,EACzB;gBAAE,SAAS;YAAa,GACxB;gBAAE,SAAS;oBAAE,gBAAgB;gBAAmB;YAAE;YAGpD,MAAM,EAAE,MAAM,EAAE,SAAS,UAAU,EAAE,GAAG,SAAS,IAAI;YAErD,gCAAgC;YAChC,aAAa,OAAO,CAAC,eAAe;YACpC,IAAI,YAAY;gBACd,aAAa,OAAO,CAAC,gBAAgB;YACvC;YAEA,kCAAkC;YAClC,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC9D,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAE1D,oBAAoB;YACpB,aAAa,MAAM;YAEnB,6BAA6B;YAC7B,OAAO,IAAI;QACb,EAAE,OAAO,cAAc;YACrB,uDAAuD;YACvD,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,aAAa;YACb,OAAO,QAAQ,MAAM,CAAC;QACxB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,gCAAgC;IAChC,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/app/notifications/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport { Bell, Check, CheckCheck, ArrowLeft, RefreshCw } from 'lucide-react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useTheme } from '../../components/ThemeProvider';\r\nimport api from '@/lib/axios';\r\n// import DashboardHeader from '@/components/DashboardHeader';\r\n//import { markNotificationAsRead } from '../../utils/notifications';\r\n\r\n\r\ninterface Notification {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  created_at: string;\r\n  is_read: boolean;\r\n}\r\n\r\ninterface ExtendedWebSocket extends WebSocket {\r\n  pingInterval?: NodeJS.Timeout;\r\n}\r\n\r\n/**\r\n * Client-side only function to mark a notification as read\r\n * This function can be exported and used anywhere in the application\r\n * @param notificationId - The ID of the notification to mark as read\r\n * @returns boolean indicating success\r\n */\r\n\r\n\r\nexport default function NotificationsPage() {\r\n  const [notifications, setNotifications] = useState<Notification[]>([]);\r\n  const [error, setError] = useState<string | null>('');\r\n  const [page, setPage] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [wsStatus, setWsStatus] = useState<'connected' | 'disconnected' | 'error'>('disconnected');\r\n  const [selectedNotifications, setSelectedNotifications] = useState<Set<string>>(new Set());\r\n  const [isSelectionMode, setIsSelectionMode] = useState(false);\r\n  const wsRef = useRef<ExtendedWebSocket | null>(null);\r\n  const wsReconnectAttempts = useRef(0);\r\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n  const lastFetchTimeRef = useRef<number>(0);\r\n  const observerRef = useRef<IntersectionObserver | null>(null);\r\n  // const lastNotificationRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const { t } = useTranslation();\r\n  const router = useRouter();\r\n  const { theme } = useTheme();\r\n\r\n  // Store read notifications in client-side cache\r\n  const markedAsReadCache = useRef<Set<string>>(new Set());\r\n\r\n  // Load marked-as-read cache from localStorage on mount\r\n  useEffect(() => {\r\n    const cachedReadIds = localStorage.getItem('markedAsReadNotifications');\r\n    if (cachedReadIds) {\r\n      try {\r\n        const readIdsArray = JSON.parse(cachedReadIds);\r\n        markedAsReadCache.current = new Set(readIdsArray);\r\n      } catch (err) {\r\n        console.error('Failed to parse cached read notifications', err);\r\n        localStorage.removeItem('markedAsReadNotifications');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Save marked-as-read cache to localStorage\r\n  const updateReadCache = (id: string) => {\r\n    markedAsReadCache.current.add(id);\r\n    localStorage.setItem(\r\n      'markedAsReadNotifications',\r\n      JSON.stringify(Array.from(markedAsReadCache.current))\r\n    );\r\n  };\r\n\r\n  const fetchNotifications = async (pageNum = 1) => {\r\n    const accessToken = localStorage.getItem('accessToken');\r\n    if (!accessToken) {\r\n      setLoading(false);\r\n      setNotifications([]);\r\n      setHasMore(false);\r\n      return;\r\n    }\r\n\r\n    // Don't fetch if we've fetched within the last second (prevents duplicate fetches)\r\n    const now = Date.now();\r\n    if (now - lastFetchTimeRef.current < 1000 && pageNum === 1) {\r\n      return;\r\n    }\r\n    lastFetchTimeRef.current = now;\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await api.get(`/blaffa/notification?page=${pageNum}`, {\r\n        headers: { Authorization: `Bearer ${accessToken}` },\r\n      });\r\n\r\n      if (res.status !== 200) throw new Error(`HTTP ${res.status}`);\r\n\r\n      const data = await res.data;\r\n\r\n      if (data?.results?.length > 0) {\r\n        // Apply local read status to the fetched notifications\r\n        const cleaned = data.results.map((n: Notification) => ({\r\n          id: n.id,\r\n          title: n.title,\r\n          content: n.content,\r\n          created_at: n.created_at,\r\n          // Mark as read if it's in our local cache OR if API says it's read\r\n          is_read: n.is_read || markedAsReadCache.current.has(n.id),\r\n        }));\r\n\r\n        // If it's page 1, replace notifications, otherwise append\r\n        if (pageNum === 1) {\r\n          setNotifications(cleaned);\r\n        } else {\r\n          setNotifications(prev => [...prev, ...cleaned]);\r\n        }\r\n\r\n        // Check if there are more pages available\r\n        setHasMore(data.next !== null);\r\n      } else {\r\n        if (pageNum === 1) {\r\n          setNotifications([]);\r\n        }\r\n        setHasMore(false);\r\n      }\r\n      setError(null);\r\n    } catch (err) {\r\n      console.error('Failed to load notifications:', err);\r\n      setError('Failed to load notifications');\r\n      setHasMore(false);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Client-side only implementation for marking notifications as read\r\n  const markAsRead = (id: string) => {\r\n    try {\r\n      // Update local state immediately\r\n      setNotifications((prev) =>\r\n        prev.map((n) => (n.id === id ? { ...n, is_read: true } : n))\r\n      );\r\n\r\n      // Add to local cache\r\n      updateReadCache(id);\r\n\r\n      console.log(`Notification ${id} marked as read locally`);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Failed to mark notification as read locally:', err);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Client-side only implementation for marking all notifications as read\r\n  const markAllAsRead = () => {\r\n    try {\r\n      // Update UI immediately\r\n      setNotifications((prev) => prev.map((n) => ({ ...n, is_read: true })));\r\n\r\n      // Add all to local cache\r\n      notifications.forEach(notification => {\r\n        updateReadCache(notification.id);\r\n      });\r\n\r\n      console.log('All notifications marked as read locally');\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Failed to mark all notifications as read locally:', err);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Mark selected notifications as read\r\n  const markSelectedAsRead = () => {\r\n    try {\r\n      setNotifications((prev) =>\r\n        prev.map((n) =>\r\n          selectedNotifications.has(n.id) ? { ...n, is_read: true } : n\r\n        )\r\n      );\r\n\r\n      // Add selected to local cache\r\n      selectedNotifications.forEach(id => {\r\n        updateReadCache(id);\r\n      });\r\n\r\n      // Clear selection\r\n      setSelectedNotifications(new Set());\r\n      setIsSelectionMode(false);\r\n\r\n      console.log('Selected notifications marked as read locally');\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Failed to mark selected notifications as read locally:', err);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Toggle selection mode\r\n  const toggleSelectionMode = () => {\r\n    setIsSelectionMode(!isSelectionMode);\r\n    setSelectedNotifications(new Set());\r\n  };\r\n\r\n  // Toggle notification selection\r\n  const toggleNotificationSelection = (id: string) => {\r\n    const newSelection = new Set(selectedNotifications);\r\n    if (newSelection.has(id)) {\r\n      newSelection.delete(id);\r\n    } else {\r\n      newSelection.add(id);\r\n    }\r\n    setSelectedNotifications(newSelection);\r\n  };\r\n\r\n  // Select all notifications\r\n  const selectAllNotifications = () => {\r\n    const allIds = new Set(notifications.map(n => n.id));\r\n    setSelectedNotifications(allIds);\r\n  };\r\n\r\n  // Clear all selections\r\n  const clearAllSelections = () => {\r\n    setSelectedNotifications(new Set());\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (dateString: string) => {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n    const diffMs = now.getTime() - date.getTime();\r\n    const diffMins = Math.floor(diffMs / 60000);\r\n    const diffHours = Math.floor(diffMs / 3600000);\r\n    const diffDays = Math.floor(diffMs / 86400000);\r\n\r\n    if (diffMins < 1) return 'Just now';\r\n    if (diffMins < 60) return `${diffMins}m ago`;\r\n    if (diffHours < 24) return `${diffHours}h ago`;\r\n    if (diffDays < 7) return `${diffDays}d ago`;\r\n\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  // Render notification content with clickable links\r\n  const renderContentWithLinks = (content: string) => {\r\n    // URL regex pattern\r\n    const urlPattern = /(https?:\\/\\/[^\\s]+)/g;\r\n    const parts = content.split(urlPattern);\r\n\r\n    return parts.map((part, index) => {\r\n      if (part.match(urlPattern)) {\r\n        return (\r\n          <a\r\n            key={index}\r\n            href={part}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            {part}\r\n          </a>\r\n        );\r\n      }\r\n      return <span key={index}>{part}</span>;\r\n    });\r\n  };\r\n\r\n  // Setup WebSocket (same as in NotificationBell)\r\n  const setupWebSocket = () => {\r\n    const accessToken = localStorage.getItem('accessToken');\r\n    if (!accessToken) {\r\n      console.error('No access token found for WebSocket connection');\r\n      setError(t('You must be logged in to receive real-time updates.'));\r\n      setWsStatus('error');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Close existing connection if any\r\n      if (wsRef.current) {\r\n        if (wsRef.current.pingInterval) {\r\n          clearInterval(wsRef.current.pingInterval);\r\n        }\r\n        wsRef.current.close();\r\n      }\r\n\r\n      const wsUrl = `wss://api.blaffa.net/ws/socket?token=${encodeURIComponent(accessToken)}`;\r\n      wsRef.current = new WebSocket(wsUrl);\r\n\r\n      wsRef.current.onopen = () => {\r\n        console.log('WebSocket connected successfully');\r\n        setWsStatus('connected');\r\n        setError(null);\r\n        wsReconnectAttempts.current = 0;\r\n\r\n        wsRef.current!.pingInterval = setInterval(() => {\r\n          if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) {\r\n            wsRef.current.send(JSON.stringify({ type: 'ping' }));\r\n          }\r\n        }, 30000);\r\n      };\r\n\r\n      wsRef.current.onmessage = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.data);\r\n\r\n          if (data.type === 'pong') {\r\n            return;\r\n          }\r\n\r\n\r\n          const newNotification: Notification = {\r\n            id: data.id,\r\n            title: data.title,\r\n            content: data.content,\r\n            created_at: data.created_at,\r\n            is_read: data.is_read || markedAsReadCache.current.has(data.id),\r\n          };\r\n\r\n          setNotifications((prev) => [newNotification, ...prev]);\r\n        } catch (error) {\r\n          console.error('Error processing WebSocket message:', error);\r\n        }\r\n      };\r\n\r\n      wsRef.current.onerror = (error) => {\r\n        console.error('WebSocket error:', error);\r\n        setWsStatus('error');\r\n      };\r\n\r\n      wsRef.current.onclose = () => {\r\n        setWsStatus('disconnected');\r\n\r\n        const reconnectDelay = Math.min(30000, 1000 * Math.pow(2, wsReconnectAttempts.current));\r\n        reconnectTimeoutRef.current = setTimeout(() => {\r\n          wsReconnectAttempts.current++;\r\n          setupWebSocket();\r\n        }, reconnectDelay);\r\n      };\r\n    } catch (error) {\r\n      console.error('Failed to setup WebSocket:', error);\r\n      setWsStatus('error');\r\n    }\r\n  };\r\n\r\n\r\n  // Add this function before the return statement\r\n  const lastNotificationElement = (node: HTMLDivElement | null) => {\r\n    if (loading) return;\r\n\r\n    if (observerRef.current) observerRef.current.disconnect();\r\n\r\n    observerRef.current = new IntersectionObserver(entries => {\r\n      if (entries[0].isIntersecting && hasMore) {\r\n        setPage(prev => prev + 1);\r\n        fetchNotifications(page + 1);\r\n      }\r\n    });\r\n\r\n    if (node) observerRef.current.observe(node);\r\n  };\r\n\r\n\r\n\r\n\r\n  // Initial fetch and WebSocket setup\r\n  useEffect(() => {\r\n    fetchNotifications(1);\r\n    setupWebSocket();\r\n\r\n    return () => {\r\n      if (wsRef.current) {\r\n        if (wsRef.current.pingInterval) {\r\n          clearInterval(wsRef.current.pingInterval);\r\n        }\r\n        wsRef.current.close();\r\n      }\r\n      if (reconnectTimeoutRef.current) {\r\n        clearTimeout(reconnectTimeoutRef.current);\r\n      }\r\n      // Add this line for observer cleanup\r\n      if (observerRef.current) {\r\n        observerRef.current.disconnect();\r\n      }\r\n\r\n    };\r\n  }, []);\r\n\r\n  const unreadCount = notifications.filter(n => !n.is_read).length;\r\n\r\n  return (\r\n    <div className={`bg-gradient-to-br ${theme.colors.a_background}`}>\r\n      {/* Header */}\r\n      {/* <DashboardHeader /> */}\r\n      <div className={`bg-gradient-to-br ${theme.colors.a_background} shadow-sm border-b border-gray-200 dark:border-gray-700`}>\r\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <button\r\n                onClick={() => router.back()}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full\"\r\n              >\r\n                <ArrowLeft className=\"h-5 w-5\" />\r\n              </button>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <h1 className=\"text-2xl font-bold\">Notification</h1>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center space-x-2\">\r\n              <div className=\"flex items-center space-x-1 text-sm text-gray-500\">\r\n                {/* <div className={`w-2 h-2 rounded-full ${\r\n                  wsStatus === 'connected' ? 'bg-green-500' : \r\n                  wsStatus === 'error' ? 'bg-red-500' : 'bg-yellow-500'\r\n                }`} />\r\n                <span>{wsStatus === 'connected' ? 'Live' : 'Offline'}</span> */}\r\n              </div>\r\n\r\n              <button\r\n                onClick={() => fetchNotifications(1)}\r\n                disabled={loading}\r\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full disabled:opacity-50\"\r\n              >\r\n                <RefreshCw className={`h-4 w-4 ${loading ? 'animate-spin' : ''}`} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Action Bar */}\r\n      {notifications.length > 0 && (\r\n        <div className={` bg-gradient-to-br ${theme.colors.s_background} border-b border-gray-200 dark:border-gray-700`}>\r\n          <div className=\"max-w-4xl mx-auto px-4 py-3\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <button\r\n                  onClick={toggleSelectionMode}\r\n                  className=\"text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300\"\r\n                >\r\n                  {isSelectionMode ? 'Annuler' : 'Sélectionner'}\r\n                </button>\r\n\r\n                {isSelectionMode && (\r\n                  <>\r\n                    <button\r\n                      onClick={selectAllNotifications}\r\n                      className=\"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\r\n                    >\r\n                      Sélectionner tout\r\n                    </button>\r\n                    <button\r\n                      onClick={clearAllSelections}\r\n                      className=\"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\r\n                    >\r\n                      Clair\r\n                    </button>\r\n                  </>\r\n                )}\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-2\">\r\n                {isSelectionMode && selectedNotifications.size > 0 && (\r\n                  <button\r\n                    onClick={markSelectedAsRead}\r\n                    className=\"flex items-center space-x-1 px-3 py-1 bg-blue-600 text-white rounded-full text-sm hover:bg-blue-700\"\r\n                  >\r\n                    <Check className=\"h-3 w-3\" />\r\n                    <span>Marquer comme lu ({selectedNotifications.size})</span>\r\n                  </button>\r\n                )}\r\n\r\n                {unreadCount > 0 && (\r\n                  <button\r\n                    onClick={markAllAsRead}\r\n                    className=\"flex items-center space-x-1 px-3 py-1 bg-green-600 text-white rounded-full text-sm hover:bg-green-700\"\r\n                  >\r\n                    <CheckCheck className=\"h-3 w-3\" />\r\n                    <span>Mark All Read</span>\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Content */}\r\n      <div className=\"max-w-4xl mx-auto px-4 py-6\">\r\n        {error && (\r\n          <div className=\"mb-4 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg\">\r\n            <p className=\"text-red-600 dark:text-red-400\">{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        {loading && notifications.length === 0 ? (\r\n          <div className=\"flex justify-center py-8\">\r\n            <RefreshCw className=\"h-6 w-6 animate-spin text-gray-400\" />\r\n          </div>\r\n        ) : notifications.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center py-32 px-6 text-center\">\r\n            <div className=\"mb-8 text-gray-200 dark:text-gray-800\">\r\n              <svg width=\"180\" height=\"220\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path d=\"M4 3C4 1.89543 4.89543 1 6 1H14L20 7V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V3Z\" stroke=\"currentColor\" strokeWidth=\"0.5\" />\r\n                <path d=\"M14 1V5C14 6.10457 14.8954 7 16 7H20\" stroke=\"currentColor\" strokeWidth=\"0.5\" />\r\n                <path d=\"M4 22C4.5 21 5.5 20.5 6 21C6.5 21.5 7.5 21.5 8 21C8.5 20.5 9.5 20.5 10 21C10.5 21.5 11.5 21.5 12 21C12.5 20.5 13.5 20.5 14 21C14.5 21.5 15.5 21.5 16 21C16.5 20.5 17.5 20.5 18 21C18.5 21.5 19.5 21 20 22\" stroke=\"currentColor\" strokeWidth=\"0.5\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-6\">\r\n            {notifications.map((notification, index) => (\r\n              <div\r\n                key={notification.id}\r\n                ref={index === notifications.length - 1 ? lastNotificationElement : null}\r\n                className={`group relative bg-gradient-to-br ${theme.colors.background} rounded-xl border-2 transition-all duration-200 ${notification.is_read\r\n                  ? 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\r\n                  : 'border-blue-300 dark:border-blue-700 bg-blue-50/50 dark:bg-blue-900/10 hover:border-blue-400 dark:hover:border-blue-600 shadow-sm'\r\n                  } p-5 hover:shadow-lg cursor-pointer ${selectedNotifications.has(notification.id) ? 'ring-2 ring-blue-500 ring-offset-2' : ''\r\n                  }`}\r\n                onClick={() => {\r\n                  if (isSelectionMode) {\r\n                    toggleNotificationSelection(notification.id);\r\n                  } else if (!notification.is_read) {\r\n                    markAsRead(notification.id);\r\n                  }\r\n                }}\r\n              >\r\n                <div className=\"flex items-start gap-4\">\r\n                  {/* Selection Checkbox */}\r\n                  {isSelectionMode && (\r\n                    <div className=\"flex-shrink-0 mt-1\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={selectedNotifications.has(notification.id)}\r\n                        onChange={() => toggleNotificationSelection(notification.id)}\r\n                        className=\"h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 cursor-pointer\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Unread Indicator */}\r\n                  {!isSelectionMode && !notification.is_read && (\r\n                    <div className=\"flex-shrink-0 mt-2\">\r\n                      <div className=\"w-3 h-3 bg-blue-500 rounded-full animate-pulse shadow-lg shadow-blue-500/50\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Content */}\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-start justify-between gap-3 mb-2\">\r\n                      <h3 className={`text-base font-semibold leading-tight ${notification.is_read\r\n                        ? `${theme.colors.text} opacity-80`\r\n                        : `${theme.colors.text}`\r\n                        }`}>\r\n                        {notification.title}\r\n                      </h3>\r\n                      <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                        <span className=\"text-xs font-medium text-gray-500 dark:text-gray-400 whitespace-nowrap\">\r\n                          {formatDate(notification.created_at)}\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                    <p className={`text-sm leading-relaxed ${notification.is_read\r\n                      ? 'text-gray-600 dark:text-gray-400'\r\n                      : 'text-gray-700 dark:text-gray-300'\r\n                      }`}>\r\n                      {renderContentWithLinks(notification.content)}\r\n                    </p>\r\n                  </div>\r\n\r\n                  {/* Mark as Read Button */}\r\n                  {!isSelectionMode && !notification.is_read && (\r\n                    <button\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        markAsRead(notification.id);\r\n                      }}\r\n                      className=\"flex-shrink-0 p-2 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-200\"\r\n                      title=\"Marquer comme lu\"\r\n                    >\r\n                      <Check className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            {/* Load More Button */}\r\n            {/* {hasMore && (\r\n              <div className=\"text-center pt-6\">\r\n                <button\r\n                  onClick={loadMore}\r\n                  disabled={loading}\r\n                  className={`px-6 py-2 bg-gradient-to-br ${theme.colors.a_background} text-white rounded-full hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed`}\r\n                >\r\n                  {loading ? 'Loading...' : 'Load More'}\r\n                </button>\r\n              </div>\r\n            )} */}\r\n            {loading && hasMore && (\r\n              <div className=\"flex justify-center py-4\">\r\n                <RefreshCw className=\"h-6 w-6 animate-spin text-gray-400\" />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}