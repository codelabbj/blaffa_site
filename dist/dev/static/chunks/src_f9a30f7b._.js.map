{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/lib/axios.ts"],"sourcesContent":["import axios, { AxiosError, InternalAxiosRequestConfig } from 'axios';\r\n\r\nconst API_URL = 'https://api.blaffa.net';\r\n\r\n// Create axios instance with base URL\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: Array<{\r\n  resolve: (token: string) => void;\r\n  reject: (error: unknown) => void;\r\n}> = [];\r\n\r\nconst processQueue = (error: unknown, token: string | null = null) => {\r\n  failedQueue.forEach(prom => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token!);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\n// Request interceptor to add auth token\r\napi.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem('accessToken');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor to handle token refresh\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  async (error: AxiosError) => {\r\n    const originalRequest = error.config as InternalAxiosRequestConfig & { _retry?: boolean };\r\n\r\n    // If the error is 401 and we haven't tried to refresh yet\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      if (isRefreshing) {\r\n        // If we're already refreshing, add the request to the queue\r\n        return new Promise((resolve, reject) => {\r\n          failedQueue.push({ resolve, reject });\r\n        })\r\n          .then((token) => {\r\n            originalRequest.headers.Authorization = `Bearer ${token}`;\r\n            return api(originalRequest);\r\n          })\r\n          .catch((err) => {\r\n            return Promise.reject(err);\r\n          });\r\n      }\r\n\r\n      originalRequest._retry = true;\r\n      isRefreshing = true;\r\n\r\n      try {\r\n        const refreshToken = localStorage.getItem('refreshToken');\r\n        if (!refreshToken) {\r\n          // No refresh token available, redirect to login\r\n          localStorage.removeItem('accessToken');\r\n          window.location.href = '/login';\r\n          return Promise.reject(error);\r\n        }\r\n\r\n        // Try to refresh the token\r\n        const response = await axios.post(\r\n          `${API_URL}/auth/refresh`,\r\n          { refresh: refreshToken },\r\n          { headers: { 'Content-Type': 'application/json' } }\r\n        );\r\n\r\n        const { access, refresh: newRefresh } = response.data;\r\n\r\n        // Update tokens in localStorage\r\n        localStorage.setItem('accessToken', access);\r\n        if (newRefresh) {\r\n          localStorage.setItem('refreshToken', newRefresh);\r\n        }\r\n\r\n        // Update the Authorization header\r\n        api.defaults.headers.common.Authorization = `Bearer ${access}`;\r\n        originalRequest.headers.Authorization = `Bearer ${access}`;\r\n\r\n        // Process the queue\r\n        processQueue(null, access);\r\n\r\n        // Retry the original request\r\n        return api(originalRequest);\r\n      } catch (refreshError) {\r\n        // If refresh fails, clear tokens and redirect to login\r\n        console.error('Failed to refresh token:', refreshError);\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('refreshToken');\r\n        window.location.href = '/login';\r\n        processQueue(refreshError);\r\n        return Promise.reject(refreshError);\r\n      } finally {\r\n        isRefreshing = false;\r\n      }\r\n    }\r\n\r\n    // For other errors, just reject\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,UAAU;AAEhB,sCAAsC;AACtC,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,eAAe;AACnB,IAAI,cAGC,EAAE;AAEP,MAAM,eAAe,CAAC,OAAgB,QAAuB,IAAI;IAC/D,YAAY,OAAO,CAAC,CAAA;QAClB,IAAI,OAAO;YACT,KAAK,MAAM,CAAC;QACd,OAAO;YACL,KAAK,OAAO,CAAC;QACf;IACF;IACA,cAAc,EAAE;AAClB;AAEA,wCAAwC;AACxC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,+CAA+C;AAC/C,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,OAAO;IACL,MAAM,kBAAkB,MAAM,MAAM;IAEpC,0DAA0D;IAC1D,IAAI,MAAM,QAAQ,EAAE,WAAW,OAAO,CAAC,gBAAgB,MAAM,EAAE;QAC7D,IAAI,cAAc;YAChB,4DAA4D;YAC5D,OAAO,IAAI,QAAQ,CAAC,SAAS;gBAC3B,YAAY,IAAI,CAAC;oBAAE;oBAAS;gBAAO;YACrC,GACG,IAAI,CAAC,CAAC;gBACL,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;gBACzD,OAAO,IAAI;YACb,GACC,KAAK,CAAC,CAAC;gBACN,OAAO,QAAQ,MAAM,CAAC;YACxB;QACJ;QAEA,gBAAgB,MAAM,GAAG;QACzB,eAAe;QAEf,IAAI;YACF,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,CAAC,cAAc;gBACjB,gDAAgD;gBAChD,aAAa,UAAU,CAAC;gBACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;gBACvB,OAAO,QAAQ,MAAM,CAAC;YACxB;YAEA,2BAA2B;YAC3B,MAAM,WAAW,MAAM,mJAAK,CAAC,IAAI,CAC/B,GAAG,QAAQ,aAAa,CAAC,EACzB;gBAAE,SAAS;YAAa,GACxB;gBAAE,SAAS;oBAAE,gBAAgB;gBAAmB;YAAE;YAGpD,MAAM,EAAE,MAAM,EAAE,SAAS,UAAU,EAAE,GAAG,SAAS,IAAI;YAErD,gCAAgC;YAChC,aAAa,OAAO,CAAC,eAAe;YACpC,IAAI,YAAY;gBACd,aAAa,OAAO,CAAC,gBAAgB;YACvC;YAEA,kCAAkC;YAClC,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAC9D,gBAAgB,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,QAAQ;YAE1D,oBAAoB;YACpB,aAAa,MAAM;YAEnB,6BAA6B;YAC7B,OAAO,IAAI;QACb,EAAE,OAAO,cAAc;YACrB,uDAAuD;YACvD,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;YACvB,aAAa;YACb,OAAO,QAAQ,MAAM,CAAC;QACxB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,gCAAgC;IAChC,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/components/CryptoTransactionForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useTheme } from './ThemeProvider';\r\nimport { FaPhoneAlt, FaMoneyBillWave, FaWallet, FaCheckCircle, FaCopy, FaArrowLeft } from 'react-icons/fa';\r\nimport api from '@/lib/axios';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useWebSocket } from '@/context/WebSocketContext';\r\n\r\nconst TRANSACTION_ENDPOINT = '/blaffa/transaction/';\r\n\r\ninterface Crypto {\r\n  id: string | number;\r\n  name: string;\r\n  symbol: string;\r\n  public_amount: number;\r\n  logo?: string;\r\n  sale_adress?: string;\r\n}\r\n\r\ninterface Network {\r\n  id: string;\r\n  name: string;\r\n  public_name: string;\r\n  country_code: string;\r\n  image?: string;\r\n  indication?: string;\r\n}\r\n\r\ninterface CryptoTransactionFormProps {\r\n  isVerified: boolean;\r\n  crypto: Crypto;\r\n  typeTrans: 'buy' | 'sale';\r\n  selectedNetwork?: Network | null;\r\n}\r\n\r\nexport default function CryptoTransactionForm({ isVerified, crypto, typeTrans, selectedNetwork }: CryptoTransactionFormProps) {\r\n  const { t } = useTranslation();\r\n  const { theme } = useTheme();\r\n  const { addMessageHandler } = useWebSocket();\r\n  const [amount, setAmount] = useState(''); // Amount in XOF (local currency)\r\n  const [quantity, setQuantity] = useState(''); // Quantity of token\r\n  const [phone, setPhone] = useState('');\r\n  const [walletLink, setWalletLink] = useState('');\r\n  const [confirmWalletLink, setConfirmWalletLink] = useState('');\r\n  const transactionType = typeTrans;\r\n  const [modal, setModal] = useState<'wallet' | 'confirm' | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [apiResult, setApiResult] = useState<Record<string, string> | null>(null);\r\n  const [error, setError] = useState('');\r\n  const [transactionLink, setTransactionLink] = useState<string | null>(null);\r\n  const [hash, setHash] = useState('');\r\n  const [view, setView] = useState<'form' | 'sale_confirm'>('form');\r\n\r\n  // Helper to parse API errors\r\n  const parseError = (err: any) => {\r\n    const data = err.response?.data;\r\n    if (!data) return t('Une erreur est survenue. Veuillez r√©essayer.');\r\n\r\n    // Handle specific error codes\r\n    const code = data.code;\r\n    if (code) {\r\n      switch (code) {\r\n        case 'token_not_valid':\r\n          return t('Votre session est expir√©e ou invalide. Veuillez vous reconnecter.');\r\n        case 'user_not_found':\r\n          return t('Utilisateur non trouv√©.');\r\n        // Add more codes as they become known\r\n      }\r\n    }\r\n\r\n    // Direct detail message\r\n    if (typeof data.detail === 'string') return data.detail;\r\n    if (typeof data.message === 'string') return data.message;\r\n\r\n    // Handle validation errors (e.g., { \"phone_number\": [\"This field is required.\"] })\r\n    if (typeof data === 'object') {\r\n      const firstError = Object.values(data)[0];\r\n      if (Array.isArray(firstError) && firstError.length > 0) return firstError[0];\r\n      if (typeof firstError === 'string') return firstError;\r\n    }\r\n\r\n    return t('Une erreur est survenue. Veuillez r√©essayer.');\r\n  };\r\n\r\n  // Helper to get country flag based on indication\r\n  const getCountryFlag = (indication?: string) => {\r\n    if (!indication) return 'üáßüá´'; // Default\r\n    const cleanIndication = indication.replace('+', '');\r\n    switch (cleanIndication) {\r\n      case '226': return 'üáßüá´'; case '225': return 'üá®üáÆ'; case '223': return 'üá≤üá±';\r\n      case '221': return 'üá∏üá≥'; case '228': return 'üáπüá¨'; case '229': return 'üáßüáØ';\r\n      case '237': return 'üá®üá≤'; case '224': return 'üá¨üá≥'; case '241': return 'üá¨üá¶';\r\n      case '242': return 'üá®üá¨'; case '243': return 'üá®üá©'; case '227': return 'üá≥üá™';\r\n      case '233': return 'üá¨üá≠'; case '234': return 'üá≥üá¨'; default: return 'üåç';\r\n    }\r\n  };\r\n\r\n  // Calculate equivalent when quantity changes (Crypto -> Fiat)\r\n  const handleQuantityChange = (q: string) => {\r\n    setQuantity(q);\r\n    if (!q || isNaN(Number(q))) {\r\n      setAmount('');\r\n      return;\r\n    }\r\n    // Amount (XOF) = Quantity * Public Amount\r\n    const xof = Number(q) * Number(crypto.public_amount);\r\n    setAmount(xof.toFixed(0));\r\n  };\r\n\r\n  const handleAmountChange = (a: string) => {\r\n    setAmount(a);\r\n    if (!a || isNaN(Number(a))) {\r\n      setQuantity('');\r\n      return;\r\n    }\r\n    // Quantity = Amount / Public Amount\r\n    const q = Number(a) / Number(crypto.public_amount);\r\n    setQuantity(q.toFixed(6));\r\n  };\r\n\r\n  // Listen for transaction_link from websocket\r\n  useEffect(() => {\r\n    type WebSocketMessage = { type: string; data?: string };\r\n    const handler = (data: WebSocketMessage) => {\r\n      if (data.type === 'transaction_link' && data.data) {\r\n        setTransactionLink(data.data);\r\n      }\r\n    };\r\n    const removeHandler = addMessageHandler(handler);\r\n    return () => removeHandler();\r\n  }, [addMessageHandler]);\r\n\r\n\r\n  // Handle API call\r\n  const handleConfirm = async () => {\r\n    setError('');\r\n    setApiResult(null);\r\n    if (!selectedNetwork) {\r\n      setError(t('Please select a network.'));\r\n      return;\r\n    }\r\n\r\n    if (transactionType === 'buy') {\r\n      if (!walletLink || !confirmWalletLink || walletLink !== confirmWalletLink) {\r\n        setError(t('Les adresses de portefeuille ne correspondent pas.'));\r\n        return;\r\n      }\r\n      // Validate phone\r\n      if (!phone) {\r\n        setError(t('Veuillez entrer votre num√©ro de t√©l√©phone.'));\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (transactionType === 'sale') {\r\n      setView('sale_confirm');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      const payload = {\r\n        type_trans: 'buy',\r\n        total_crypto: quantity,\r\n        crypto_id: String(crypto.id),\r\n        phone_number: phone.replace(/\\s+/g, ''),\r\n        network_id: selectedNetwork.id,\r\n        amount: amount,\r\n        wallet_link: walletLink,\r\n      };\r\n\r\n      const response = await api.post(TRANSACTION_ENDPOINT, payload);\r\n      const data = response.data;\r\n\r\n      setApiResult(data as Record<string, string>);\r\n      if (data && data.transaction_link) {\r\n        window.open(data.transaction_link, '_blank', 'noopener,noreferrer');\r\n      }\r\n    } catch (err: any) {\r\n      console.error(\"Transaction Error:\", err);\r\n      setError(parseError(err));\r\n    } finally {\r\n      setLoading(false);\r\n      setModal(null);\r\n    }\r\n  };\r\n\r\n  // Copy to clipboard\r\n  const handleCopy = (text: string) => {\r\n    navigator.clipboard.writeText(text);\r\n  };\r\n\r\n  // Add a function to handle hash submission for sell\r\n  const handleHashSubmit = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    setApiResult(null);\r\n    if (!selectedNetwork) {\r\n      setError(t('Please select a network.'));\r\n      setLoading(false);\r\n      return;\r\n    }\r\n    try {\r\n      const payload = {\r\n        type_trans: 'sale',\r\n        total_crypto: quantity, // was amount in sale\r\n        crypto_id: String(crypto.id),\r\n        phone_number: phone.replace(/\\s+/g, ''),\r\n        network_id: selectedNetwork.id,\r\n        amount: amount, // was calculatedValue\r\n        hash,\r\n      };\r\n\r\n      const response = await api.post(TRANSACTION_ENDPOINT, payload);\r\n      const data = response.data;\r\n\r\n      setApiResult(data as Record<string, string>);\r\n      if (data && data.transaction_link) {\r\n        window.open(data.transaction_link, '_blank', 'noopener,noreferrer');\r\n      }\r\n      setTimeout(() => {\r\n        setView('form');\r\n        setApiResult(null);\r\n        setHash('');\r\n        setModal(null);\r\n      }, 2000);\r\n    } catch (err: any) {\r\n      console.error(\"Hash Submit Error:\", err);\r\n      setError(parseError(err));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isVerified) {\r\n    return (\r\n      <div className=\"p-4 bg-yellow-100 text-yellow-800 rounded-lg text-center\">\r\n        {t('Please verify your account to buy or sell crypto.')}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (view === 'sale_confirm') {\r\n    return (\r\n      <div className=\"w-full min-h-[400px] flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center gap-4 mb-8\">\r\n          <button onClick={() => setView('form')} className={`${theme.colors.hover} text-xl`}>\r\n            <FaArrowLeft />\r\n          </button>\r\n          <h1 className={`text-xl font-bold ${theme.colors.text}`}>Confirmation de l&apos;envoi</h1>\r\n        </div>\r\n\r\n        <p className={`text-sm mb-8 ${theme.colors.d_text}`}>\r\n          Veuillez envoyer vos cryptos √† l&apos;adresse ci-dessous dans votre portefeuille.\r\n        </p>\r\n\r\n        <div className=\"mb-6\">\r\n          <p className={`text-sm font-bold mb-2 ${theme.mode === 'dark' ? 'text-blue-400' : 'text-blue-900'}`}>Adresse de destination :</p>\r\n          <div className={`flex items-center gap-3 p-4 rounded-xl border ${theme.mode === 'dark' ? 'bg-slate-800/50 border-slate-700' : 'bg-gray-50 border-gray-200'}`}>\r\n            <span className={`flex-1 font-mono text-sm break-all ${theme.colors.text}`}>\r\n              {crypto.sale_adress || 'Adresse non disponible'}\r\n            </span>\r\n            <button\r\n              onClick={() => handleCopy(crypto.sale_adress || '')}\r\n              className={`p-2 rounded-lg ${theme.mode === 'dark' ? 'bg-slate-700 text-blue-400' : 'bg-blue-100 text-blue-800'}`}\r\n            >\r\n              <FaCopy />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Hash Input with Floating Label */}\r\n        <div className=\"relative mt-8 mb-auto\">\r\n          <div className=\"absolute -top-3 left-4 px-2 bg-white dark:bg-slate-900 z-10\">\r\n            <span className=\"text-xs text-green-600 font-medium\">Entrez le hash/id de la transaction</span>\r\n          </div>\r\n          <div className={`p-4 rounded-xl border-2 border-green-500 ${theme.colors.a_background}`}>\r\n            <input\r\n              type=\"text\"\r\n              value={hash}\r\n              onChange={(e) => setHash(e.target.value)}\r\n              placeholder=\"0x...\"\r\n              className={`w-full bg-transparent outline-none text-lg ${theme.colors.text} placeholder:text-gray-400`}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Button */}\r\n        <div className=\"mt-10\">\r\n          {error && (\r\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm font-medium\">\r\n              {error}\r\n            </div>\r\n          )}\r\n          <button\r\n            onClick={handleHashSubmit}\r\n            className=\"w-full py-4 rounded-xl font-bold text-lg text-white shadow-lg bg-[#003087] hover:bg-[#002566] transition-all disabled:opacity-50\"\r\n            disabled={loading || !hash}\r\n          >\r\n            {loading ? t('Traitement...') : 'Valider'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {/* Wallet Address Inputs (Buy only) */}\r\n      {transactionType === 'buy' && (\r\n        <div className=\"space-y-4 mb-6\">\r\n          <div className={`p-4 rounded-xl border ${theme.colors.a_background} ${theme.mode === 'dark' ? 'border-blue-900' : 'border-blue-800'}`}>\r\n            <label className={`block mb-2 text-sm ${theme.colors.text}`}>Adresse du portefeuille</label>\r\n            <input\r\n              type=\"text\"\r\n              value={walletLink}\r\n              onChange={(e) => setWalletLink(e.target.value)}\r\n              placeholder=\"Entrez l'adresse du portefeuille\"\r\n              className={`w-full bg-transparent outline-none text-lg ${theme.colors.text} placeholder:text-gray-400`}\r\n            />\r\n          </div>\r\n\r\n          <div className={`p-4 rounded-xl border ${theme.colors.a_background} ${theme.mode === 'dark' ? 'border-gray-700' : 'border-gray-300'}`}>\r\n            <input\r\n              type=\"text\"\r\n              value={confirmWalletLink}\r\n              onChange={(e) => setConfirmWalletLink(e.target.value)}\r\n              placeholder=\"Confirmer l'adresse du portefeuille\"\r\n              className={`w-full bg-transparent outline-none text-lg ${theme.colors.text} placeholder:text-gray-400`}\r\n            />\r\n          </div>\r\n\r\n          {/* Warning */}\r\n          <div className=\"p-3 bg-orange-50 border border-orange-200 rounded-xl flex items-start gap-3\">\r\n            <div className=\"w-5 h-5 rounded-full border border-orange-400 text-orange-400 flex items-center justify-center text-xs flex-shrink-0 mt-0.5\">i</div>\r\n            <p className=\"text-sm text-orange-800 leading-snug\">\r\n              V√©rifiez bien votre adresse. Les transactions crypto sont irr√©versibles.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Quantity & Amount Inputs */}\r\n      <div className=\"space-y-4 mb-6\">\r\n        <div className={`p-4 rounded-xl border ${theme.colors.a_background} ${theme.mode === 'dark' ? 'border-gray-700' : 'border-gray-300'}`}>\r\n          <label className={`block mb-1 text-sm text-gray-500`}>Quantit√© de {crypto.name} √† {transactionType === 'buy' ? 'acheter' : 'vendre'}</label>\r\n          <input\r\n            type=\"number\"\r\n            value={quantity}\r\n            onChange={(e) => handleQuantityChange(e.target.value)}\r\n            placeholder=\"0\"\r\n            className={`w-full bg-transparent outline-none text-xl font-medium ${theme.colors.text}`}\r\n          />\r\n        </div>\r\n\r\n        <div className={`p-4 rounded-xl border ${theme.colors.a_background} ${theme.mode === 'dark' ? 'border-gray-700' : 'border-gray-300'}`}>\r\n          <label className={`block mb-1 text-sm text-gray-500`}>Montant √©quivalent (F CFA)</label>\r\n          <input\r\n            type=\"number\"\r\n            value={amount}\r\n            onChange={(e) => handleAmountChange(e.target.value)}\r\n            placeholder=\"0\"\r\n            className={`w-full bg-transparent outline-none text-xl font-medium ${theme.colors.text}`}\r\n          />\r\n        </div>\r\n        <p className=\"text-xs text-gray-400 pl-1\">1000 F - 60000 F</p>\r\n      </div>\r\n\r\n      {/* Info Box (*133#) */}\r\n      {transactionType === 'buy' && (\r\n        <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-xl flex items-start gap-3\">\r\n          <div className=\"w-5 h-5 rounded-full border border-blue-500 text-blue-500 flex items-center justify-center text-xs flex-shrink-0 mt-0.5\">i</div>\r\n          <p className=\"text-sm text-blue-800 leading-snug\">\r\n            Apr√®s avoir lancer, veuillez composer *133# puis 1 pour confirmer le montant qui appara√Æt.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Phone Number with Flag */}\r\n      <div className=\"flex gap-4 mb-8\">\r\n        <div className={`w-1/3 flex items-center justify-center gap-2 h-14 rounded-xl border ${theme.mode === 'dark' ? 'border-slate-700' : 'border-gray-300'} ${theme.colors.a_background}`}>\r\n          {/* Flag + Code */}\r\n          <span className=\"text-2xl\">\r\n            {selectedNetwork?.image && false ? <img src={selectedNetwork?.image} className=\"w-6 h-4\" alt=\"\" /> : getCountryFlag(selectedNetwork?.indication || '+225')}\r\n          </span>\r\n          <span className={`text-lg font-bold ${theme.colors.text}`}>\r\n            {selectedNetwork?.indication ? selectedNetwork.indication : \"+225\"}\r\n          </span>\r\n        </div>\r\n        <div className={`flex-1 h-14 px-4 rounded-xl border ${theme.mode === 'dark' ? 'border-slate-700' : 'border-gray-300'} ${theme.colors.a_background} flex items-center`}>\r\n          <input\r\n            type=\"tel\"\r\n            value={phone}\r\n            onChange={(e) => {\r\n              const value = e.target.value.replace(/\\D/g, '');\r\n              setPhone(value);\r\n            }}\r\n            placeholder=\"Num√©ro de t√©l√©phone\"\r\n            className={`w-full bg-transparent outline-none text-lg ${theme.colors.text} placeholder:text-gray-400`}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Footer Info */}\r\n      {transactionType === 'buy' && (\r\n        <p className=\"text-center text-orange-400 text-sm italic mb-6\">\r\n          Les d√©p√¥ts commencent a partir de 105 FCFA\r\n        </p>\r\n      )}\r\n\r\n      {/* Error message */}\r\n      {error && (\r\n        <div className=\"mb-4 p-3 bg-red-50 border border-red-200 text-red-600 rounded-xl text-sm font-medium\">\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      <button\r\n        onClick={handleConfirm}\r\n        className={`w-full py-4 rounded-xl font-bold text-lg text-white shadow-lg transition-all\r\n                ${loading ? 'opacity-70 cursor-not-allowed' : 'hover:scale-[0.99]'}\r\n            `}\r\n        style={{ backgroundColor: theme.mode === 'dark' ? theme.colors.primary : '#002D74' }}\r\n        disabled={loading}\r\n      >\r\n        {loading ? t('Traitement...') : 'Confirmer'}\r\n      </button>\r\n\r\n\r\n      {/* API RESULT / Transaction Link Modal */}\r\n      {/* ... keeping behavior of opening link in new tab mostly ... */}\r\n\r\n      {/* API RESULT / Transaction Link Modal */}\r\n      {/* ... keeping behavior of opening link in new tab mostly ... */}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Simple Modal Component\r\nfunction Modal({ children, onClose, theme }: { children: React.ReactNode; onClose: () => void; theme: { mode: string } }) {\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\" style={{ backdropFilter: 'blur(5px)', backgroundColor: 'rgba(0,0,0,0.5)' }}>\r\n      <div className={`bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-md relative overflow-hidden`}>\r\n        <button onClick={onClose} className=\"absolute top-2 right-3 text-2xl text-gray-500\">&times;</button>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 850, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/components/CryptoSelectionGrid.tsx"],"sourcesContent":["'use client';\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport api from \"@/lib/axios\";\r\nimport { useTheme } from \"@/components/ThemeProvider\";\r\n// import { useTranslation } from \"react-i18next\";\r\n// ... other imports\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport CryptoTransactionForm from '@/components/CryptoTransactionForm';\r\nimport { ImSpinner2 } from 'react-icons/im';\r\n\r\ninterface Crypto {\r\n    id: number;\r\n    public_amount: number;\r\n    created_at: string;\r\n    updated_at: string;\r\n    logo: string;\r\n    code: string;\r\n    name: string;\r\n    amount: string;\r\n    symbol: string;\r\n}\r\n\r\ninterface Network {\r\n    id: string;\r\n    name: string;\r\n    public_name: string;\r\n    image?: string;\r\n}\r\n\r\nconst CRYPTO_API = \"/blaffa/crypto\";\r\nconst NETWORK_API = \"/blaffa/network/\";\r\n\r\ninterface CryptoSelectionGridProps {\r\n    mode: 'buy' | 'sale';\r\n    title: string;\r\n}\r\n\r\nexport default function CryptoSelectionGrid({ mode, title }: CryptoSelectionGridProps) {\r\n    const { theme } = useTheme();\r\n    const [cryptos, setCryptos] = useState<Crypto[]>([]);\r\n    const [networks, setNetworks] = useState<Network[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [selectedCrypto, setSelectedCrypto] = useState<Crypto | null>(null);\r\n    const [selectedNetwork, setSelectedNetwork] = useState<Network | null>(null);\r\n    const [step, setStep] = useState<'crypto' | 'network' | 'details'>('crypto');\r\n\r\n    // Fetch Cryptos\r\n    useEffect(() => {\r\n        const fetchCryptos = async () => {\r\n            setLoading(true);\r\n            setError(null);\r\n            try {\r\n                const response = await api.get(CRYPTO_API + `?type_trans=${mode}`);\r\n                setCryptos(Array.isArray(response.data.results) ? response.data.results : []);\r\n            } catch (err) {\r\n                console.error(err);\r\n                setError(\"Failed to fetch cryptocurrencies\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchCryptos();\r\n    }, [mode]);\r\n\r\n    // Fetch Networks\r\n    useEffect(() => {\r\n        const fetchNetworks = async () => {\r\n            try {\r\n                const response = await api.get(NETWORK_API);\r\n                if (Array.isArray(response.data)) {\r\n                    setNetworks(response.data);\r\n                }\r\n            } catch (err) {\r\n                console.error(\"Failed to fetch networks\", err);\r\n            }\r\n        };\r\n        fetchNetworks();\r\n    }, []);\r\n\r\n    const handleCryptoSelect = (crypto: Crypto) => {\r\n        const token = localStorage.getItem('accessToken');\r\n        if (!token) {\r\n            window.location.href = '/login';\r\n            return;\r\n        }\r\n        setSelectedCrypto(crypto);\r\n        setStep('network');\r\n    };\r\n\r\n    const handleNetworkSelect = (network: Network) => {\r\n        setSelectedNetwork(network);\r\n        setStep('details');\r\n    };\r\n\r\n    const handleBack = () => {\r\n        if (step === 'details') {\r\n            setStep('network');\r\n            setSelectedNetwork(null);\r\n        } else if (step === 'network') {\r\n            setStep('crypto');\r\n            setSelectedCrypto(null);\r\n        } else {\r\n            window.history.back();\r\n        }\r\n    };\r\n\r\n    if (step === 'details' && selectedCrypto && selectedNetwork) {\r\n        return (\r\n            <div className=\"w-full\">\r\n                <button\r\n                    onClick={handleBack}\r\n                    className={`group flex items-center gap-2 mb-6 ${theme.mode === 'dark' ? 'text-gray-400 hover:text-white' : 'text-gray-500 hover:text-gray-900'} transition-colors`}\r\n                >\r\n                    <FaArrowLeft />\r\n                    <span className=\"font-medium\">Retour</span>\r\n                </button>\r\n                <div className=\"mb-6\">\r\n                    <h2 className={`text-xl font-bold ${theme.colors.text}`}>4. Entrez les informations de la crypto</h2>\r\n                </div>\r\n                <CryptoTransactionForm\r\n                    isVerified={true}\r\n                    crypto={selectedCrypto}\r\n                    // network={selectedNetwork} // Pass network prop (Typescript will complain until I update Form)\r\n                    // For now, allow Form to update, I'll update Form next.\r\n                    // But I need to pass it. I'll pass it as `selectedNetwork` and I'll update the interface in Form.\r\n                    typeTrans={mode}\r\n                    selectedNetwork={selectedNetwork} // Passing it here\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (step === 'network' && selectedCrypto) {\r\n        return (\r\n            <div className=\"w-full\">\r\n                <button\r\n                    onClick={handleBack}\r\n                    className={`group flex items-center gap-2 mb-6 ${theme.mode === 'dark' ? 'text-gray-400 hover:text-white' : 'text-gray-500 hover:text-gray-900'} transition-colors`}\r\n                >\r\n                    <FaArrowLeft />\r\n                    <span className=\"font-medium\">Retour</span>\r\n                </button>\r\n                <h1 className={`text-2xl font-bold mb-6 ${theme.colors.text}`}>R√©seau</h1>\r\n                <p className={`font-medium mb-6 ${theme.colors.d_text}`}>3. S√©lectionnez votre r√©seau</p>\r\n\r\n                <div className=\"space-y-3\">\r\n                    {networks.map((network) => (\r\n                        <div\r\n                            key={network.id}\r\n                            onClick={() => handleNetworkSelect(network)}\r\n                            className={`flex items-center gap-4 p-4 rounded-xl border cursor-pointer transition-all \r\n                                ${theme.mode === 'dark' ? 'border-slate-700 hover:bg-slate-800' : 'border-gray-200 hover:bg-gray-50'} \r\n                                ${theme.colors.a_background}`}\r\n                        >\r\n                            <div className=\"w-10 h-10 relative flex-shrink-0\">\r\n                                {network.image ? (\r\n                                    <img src={network.image} alt={network.name} className=\"w-full h-full object-contain rounded-md\" />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full bg-gray-200 rounded-md flex items-center justify-center text-xs font-bold text-gray-500\">\r\n                                        {network.name.substring(0, 2)}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <span className={`text-lg font-medium ${theme.colors.text}`}>{network.public_name || network.name}</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full\">\r\n            <h1 className={`text-2xl font-bold mb-2 ${theme.colors.text}`}>\r\n                {title === 'Achat' && (\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <button onClick={() => window.history.back()} className={theme.colors.hover}><FaArrowLeft className=\"text-xl\" /></button>\r\n                        <span>Achat</span>\r\n                    </div>\r\n                )}\r\n                {title === 'Vente' && (\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <button onClick={() => window.history.back()} className={theme.colors.hover}><FaArrowLeft className=\"text-xl\" /></button>\r\n                        <span>Vente</span>\r\n                    </div>\r\n                )}\r\n            </h1>\r\n\r\n            <p className={`font-medium mb-6 ${theme.colors.d_text}`}>1. S√©lectionnez votre crypto monnaie</p>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center py-10\">\r\n                    <ImSpinner2 className=\"animate-spin text-3xl text-blue-600\" />\r\n                </div>\r\n            ) : error ? (\r\n                <div className=\"text-red-500\">{error}</div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                    {cryptos.map((crypto) => (\r\n                        <div\r\n                            key={crypto.id}\r\n                            onClick={() => handleCryptoSelect(crypto)}\r\n                            className={`border ${theme.mode === 'dark' ? 'border-slate-700' : 'border-gray-200'} rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-blue-500 transition-all ${theme.colors.a_background} shadow-sm`}\r\n                        >\r\n                            <div className=\"w-12 h-12 relative mb-3\">\r\n                                <img src={crypto.logo} alt={crypto.name} className={`w-full h-full object-contain rounded-full ${theme.mode === 'dark' ? 'bg-slate-800' : 'bg-black'} text-white p-1`} />\r\n                            </div>\r\n                            <h3 className={`font-medium mb-1 ${theme.colors.text}`}>{crypto.name}</h3>\r\n                            <p className={`font-bold ${theme.colors.primary}`}>{parseInt(crypto.public_amount.toString()).toFixed(1)} CFA</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1287, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/USER/OneDrive/Documents/Coblabsite/blaffa_site/src/app/crypto/sell/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useTheme } from '@/components/ThemeProvider';\r\nimport CryptoSelectionGrid from '@/components/CryptoSelectionGrid';\r\n\r\nexport default function SellCryptoPage() {\r\n    const { theme } = useTheme();\r\n    return (\r\n        <div className={`min-h-screen ${theme.colors.a_background} p-4 pt-6`}>\r\n            <CryptoSelectionGrid mode=\"sale\" title=\"Vente\" />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,kJAAQ;IAC1B,qBACI,6LAAC;QAAI,WAAW,CAAC,aAAa,EAAE,MAAM,MAAM,CAAC,YAAY,CAAC,SAAS,CAAC;kBAChE,cAAA,6LAAC,uJAAmB;YAAC,MAAK;YAAO,OAAM;;;;;;;;;;;AAGnD;GAPwB;;QACF,kJAAQ;;;KADN"}}]
}